\section{Metóda rezolvent pre výrokovú logiku}
\startFIXME

\paragraph{Definícia} Majme $C_1$ a $C_2$ -- ľubovoľné klauzuly, $L_1$ je
literál z $C_1$ a je kontrárny literálu $L_2$, ktorý sa vyskytuje v $C_2$. Ak z
$C_1$ vynecháme $L_1$ a z $C_2$ vynecháme $L_2$. Ak z tých častí, ktoré
zostávajú, zostrojíme disjunkciu $C_1 \lor C_2$, táto sa nazýva
\emph{rezolventa} $C_1$ a $C_2$.

\paragraph{Príklad}
$$
\begin{array}{ll}
C_1: P \lor R, & C_2: \neg P \lor Q \\
P \in C_1 & C_1': R \\
P \in C_2 & C_2': Q \\
\end{array}
$$

\paragraph{Príklad}
$$C_1: \neg P \lor Q\lor R$$
$$C_2: \neg Q \lor S$$
Kontrárna dvojica $\neg Q$, $Q$; rezolventa je teda:
$$C_1, C_2: \neg P \lor R \lor S$$

\paragraph{Príklad}

$$C_1: \neg P \lor Q$$
$$C_2: \neg P \lor R$$

\paragraph{Veta} Nech $C_1$ a $C_2$ sú klauzuly, $C$ je rezolventa klauzúl
$C_1$, $C_2$. Potom $C$ je logickým dôsledkom klauzúl $C_1$ a $C_2$
$$A_1, A_2, \ldots, A_n, B$$
$$
\begin{array}{ll}
A_1 \land A_2 \land \ldots \land A_n \implies B & \equiv 1	\\
\provable A_1 \land A_2 \land \ldots \land A_n \implies B & \\
A_1 \land A_2 \land \ldots \land A_n \land \neg B & \equiv 0	\\
\end{array}
$$
\paragraph{Dôkaz} $C_1$, $C_2$, $C$


$$
\begin{array}{lll}
C_1 &= &L \lor C_1' \\
C_2 &=& \neg L \lor C_2' \\
C   &=& C_1' \lor C_2'	\\
\end{array}
$$
$C_1$ a $C_2$ sú pravdivé a klauzula $C$ je logickým dôsledkom $C_1$ a $C_2$.

\stopFIXME

\begin{poznamka}
    Nech $C_1$, $C_2$ sú jednotkové klauzuly. Ak $C_1,C_2$ majú
    rezolventu, potom musia tvoriť kontrárnu dvojicu $L, \neg L$
    a rezolventou je prázdna klauzula $C \equiv \eps$.
\end{poznamka}

Našim cieľom bude zovše obecniť predchádzajúcu poznámku do
nasledujúceho variantu: Nech $S$ je množina klauzúl. Potom $S$ je
nesplniteľná práve vtedy keď z nej vieme nejakým spôsobom pomocou
rezolvent získať prázdnu klauzulu.
Teraz si to formálne rozpíšeme.

\begin{definicia}[Rezolvenčné pravidlo]
    Nech $S$ je množina klauzúl.
    Rezolvenčným odvodením klauzuly $C$ z množiny klauzúl $S$
    nazývame konečnú postupnosť klauzúl $C_1, C_2, \ldots, C_n \equiv C$ takú,
    že pre každé $i \in \{1,2,\dots,n\}$ platí:
    $C_i$ je buď z $S$ alebo $C_i$ je rezolventa niektorých klauzúl
    $C_j, C_k$ pre $j, k < i$.

    Ak $C$ je prázdna klauzula, potom takémuto odvodeniu hovoríme 
    zamietnutie odvodenia alebo tiež dôkaz nesplniteľnosti $S$.
\end{definicia}

\begin{definicia}
    Majme množinu klauzúl $S$ a klauzulu $C$.
    Hovoríme, že $C$ môžeme získať z $S$,
    ak existuje (rezolvenčné) odvodenie $C_1, \dots, C_m$ z množiny $S$ také, že
    $C_m \equiv C$.
\end{definicia}

\begin{priklad}
    Uvažujme množinu klauzúl $S=\{\neg P \lor Q,\ \neg Q,\ P\}$.
    Uvažujme nasledujúce rezolvenčné odvodenie
    \begin{itemize} 
	\item[1:] $ \neg P \lor Q $  -- z $S$
	\item[2:] $ \neg Q $ -- z $S$
	\item[3:] $ \neg P $ -- pravidlo rezolventy na 1,2
	\item[4:] $ P $ -- z $S$.
        \item[5:] $\eps$ -- pravidlo rezolventy na 3,4
    \end{itemize}
    Dostali sme prázdnu klauzulu a teda množina klauzúl $S$ nie je
    splniteľná.
\end{priklad}

\begin{priklad}
    \label{prikl:rezolvencne_odvodenie}
    Nech $S=\{P \lor Q,\ \neg P \lor Q,\ 
            P \lor \neg Q,\ \neg P \lor \neg Q\}$.
    Opäť vieme dokázať nesplniteľnosť množiny klauzúl $S$:

    \begin{itemize}
	\item[1:] $P \lor Q$ -- z $S$
	\item[2:] $\neg P \lor Q$ -- z $S$
	\item[3:] $P \lor \neg Q$ -- z $S$
	\item[4:] $\neg P \lor \neg Q$ -- z $S$
	\item[5:] $Q$ -- rezolventa 1,2
	\item[6:] $\neg Q$ -- rezolventa 3,4
        \item[7:] $\eps$ -- rezolventa 5,6
    \end{itemize}

    K tomuto odvodeniu môžeme navyše nakresliť aj jeho strom (obr.
    \ref{fig:strom_odvodenia}.

    \begin{figure}[h]
	\centering\includegraphics{img/11/odvodenie.1.mps}
	\caption{Strom rezolvenčného odvodenia z príkladu 
            \ref{prikl:rezolvencne_odvodenie}}
        \label{fig:strom_odvodenia}
    \end{figure}
\end{priklad}

\begin{poznamka}
    Pravidlom rezolventy smerujeme k tomu, že sa snažíme získať
    prázdnu klauzulu. Dôležité je, že je to silné pravidlo,
    t.j., že ak je množina $S$ nie je splniteľná, vieme prázdnu
    klauzulu naozaj odvodiť iba pomocou tohoto pravidla. Na začiatok
    začneme ekvivalenciou pravidla rezolventy a pravidla modus ponens.
\end{poznamka}

\begin{lema}
    Pravidlo modus ponens je ekvivalentné s pravidlom rezolventy.
\end{lema}

\begin{dokaz}
    Najskôr si ukážeme, že pomocou MP vieme dokázať pravidlo rezolventy:
    Chceme ukázať $A \implies B, \neg A \implies C \provable \neg B
    \implies C$.
    Postupujme nasledovne:
    \begin{itemize}
        \item[1.] $\provable (A \implies B) \implies (\neg B \implies
                \neg A)$ -- tvrdenie z výrokovej logiky
        \item[2.] $A \implies B \provable A \implies B$
        \item[3.] $A \implies B \provable \neg B \implies \neg A$ --
                MP 1,2
        \item[4.] $\provable (\neg B \implies A) \implies
            ((\neg A \implies C) \implies (\neg B \implies C))$ --
                tvrdenie z výrokovej logiky
        \item[5.] $A \implies B \provable
            (\neg A \implies C) \implies (\neg B \implies C)$ -- MP
            3,4
        \item[6.] $\neg A \implies C \implies \neg A \implies C$
        \item[7.] $A \implies B, \neg A \implies C \provable
            \neg B \implies C$ -- MP 5,6
    \end{itemize}
    Poznamenajme pritom, že obidve využité tvrdenia výrokovej logiky
    sa dajú dokázať z axióm iba pomocou pravidla modus ponens.

    Naopak, uvažujme, že chceme pravidlo MP simulovať pomocou pravidla
    rezolventy. Teda chceme ukázať $A, A\implies B \provable B$.
    Použijeme nasledujúci trik.
    \begin{itemize}
        \item[1.] $A \equiv A \lor \eps$
        \item[2.] $A \implies B \equiv \neg A \lor B$
        \item[3.] $A \lor \eps, \neg A \lor B \provable \eps \lor B$
            -- použime pravidlo rezolventy na ekvivalentné zápisy
            formúl $A, A\implies B$
        \item[4.] $B \equiv \eps \lor B$ a teda
        \item[5.] $A,A\implies B \provable B$.
    \end{itemize}
\end{dokaz}

\section{Substitúcia a unifikácia}
\startFIXME

Vo výrokovej logike nebol problém hľadať kontrárne dvojice.
Zložitejšia situácia ale nastáva v prípade predikátovej logiky
prvého rádu. A práve tomu sa budeme venovať v tejto kapitole.

$$
\begin{array}{ll}
C_1  = P(x) \lor Q(x),& C_2 = \neg P(f(x)) \lor R(x)\\
C_1:  x \cdot f(a),&  C_2 \cdot : a\\
C_1':  P(f(x)) \lor Q(f(a)),& C_2':\neg P(f(a)) \lor R(a)\\
\end{array}
$$

Teraz môžeme definovať rezolventu; bude to $Q(f(a)) \lor R(a)$. Mohli by sme
postupovať aj takto:

$$
\begin{array}{ll}
C_1: & x: f(x) \\
C_1^*: & P(f(x)) \lor Q(f(x)) \\
C_2: & \neg P(f(x)) \lor R(x)\\
 & P(f(x))\\
 & \neg P(f(x)))\\
C_3: & Q(f(x)) \neg R(x)\\
\end{array}
$$

Formulu $C_3$ nazývam rezolventou pre klauzulu $C_1$ a $C_2$. Zmyslom
substitúcie a unifikácie je umožniť operácie, na ktoré sme boli zvyknutí vo
výrokovej logike -- tu bude situácia technicky náročnejšia.

\paragraph{Definícia} Pod \emph{substitúciou} rozumieme konečnú množinu tvaru:
$\{t_1/v_1, \ldots, t_n/v_n\}$, kde každé $v_i$ je premenná a všetky $v_i,
i=1..n$ sú navzájom rôzne. Každý term $t_i, i=1..n$ je rôzny od $v_i, i=1..n$.
ak $t_1, \ldots, t_n$ sú základné inštancie (teda termy bez premenných), tak
substitúciu nazývame \emph{základná substitúcia}. Ak množina je prázdna, tak
substitúciu budeme označovať $\varepsilon$. Na označovanie substitúcií budeme
používať grécke písmená.

\paragraph{Príklad} $\{ f(z)/x; y/z\}$, $\{ a/x, g(y)/y, f(g(y))/z\}$.

\paragraph{Definícia} Nech $\theta$ je ľubovoľná substitúcia a $E$ je nejaký
výraz. Nech $\theta = \{ t_1/v_1, \ldots t_n/v_n\}$. Potom $E\theta$ označuje
výraz, ktorý vznikne tak, že súčasne vo výraze $E$ nahradíme premennú $v_i$
termom $t_i, i=1..n$.

\paragraph{Príklad} Majme $\theta=\{a/x, f(b)/y, c/z\}$, $E = P(x, y, z)$. Potom
$E\theta = P(P(a, f(b), c)$.

\par Ďalšia operácia, ktorú budeme potrebovať, je operácia skladania
substitúcií.

\paragraph{Definícia} Majme $\theta = \{t_1/x_1, \ldots t_n/x_n\}$ a $\lambda =
\{ u_1/y_1, \ldots u_m/y_m \}$. Zloženie (kompozícia) substitúcií, označíme
$\theta \circ \lambda$:
$$\{t_1 \lambda/x_1, \ldots t_n \lambda/x_n, u_1/y_1m \ldots u_m/y_m \}$$ také,
že vyradí všetky členy $t_i\lambda/x_i$, pre ktoré platí, že $t_i \lambda = x_1$,
všetky $u_i/y_1$, pre ktoré $y_i \in \{x_1, x_2, \ldots x_n\}$.

\paragraph{Príklad} 
$$\theta \{t_1/x_1, t_2/x_2\} = \{ f(y)/x, z/y\}$$
$$\lambda = \{ u_1/y_1, u_2/y_2, u_3/y_3\} = \{ a/x, b/y, y/z\}$$

$$ \theta \circ \lambda = \{ t_1 \lambda / x_1, t_2\lambda/x_2, u_1/y_1,
u_2/y_2, u_3/y_3\} = \\ 
\{ f(b)x, y/y, a/x, b/y, y/z\}$$
$$ \theta \circ \lambda = \{ f(b)/x, y/z\}$$

\paragraph{Úloha} Dokážte, že skladanie substitúcií je asociatávna operácia.
Tiež dokážte, že $\varepsilon \circ \theta = \theta \circ \varepsilon$.
\par Zoberieme $\theta, \lambda, \mu$, potom platí $ \theta \circ(\lambda \circ
\mu) = (\theta \circ \lambda) \circ \mu$.

\paragraph{Definícia} Substitúciu $\theta$ nazveme \emph{unifikátorom} pre
množinu výrazov $E_1, E_2, \ldots, E_n$, ak platí $E_1\theta = E_2\theta =
\cdots = E_n\theta$. Množinu nazveme \emph{unifikovateľnou}, ak pre ňu existuje
unifikátor.

\paragraph{Príklad} Majme množinu $\{ P(a,y), P(x,f(b)\}$, $\theta = \{a/x,
f(b)/y\}$ -- unifikátor pre túto množinu. 

\paragraph{Definícia} Majme množinu výrazov $\{ E_1, E_2, \ldots, E_n\}$,
$\theta$ je ľubovoľný unifikátor pre množinu uvedených výrazov. Unifikátor
$\sigma$ pre množinu výrazov $\{E_1, E_2, \ldots, E_n\}$ nazveme
\emph{najvšeobecnejší unifikátor}, ak pre $\theta$ platí $\theta = \sigma \circ
\lambda$, kde $\lambda$ je vhodná substitúcia.

\par Uvažujme výrazy $P(a)$, $P(x)$ Pozerajme sa na ne ako na konečnú
postupnosť symbolov -- odlišujú sa akurát v treťom symbole. Toto je prvá
diferencia. Vo všeobecnosti môže byť týchto výrazov $n$.

\paragraph{Definácia} Nech $W$ je neprázdna množina výrazov. \emph{Diferenčnú
množinu}
pre množinu výrazov $W$ dostávame tak, že na prvú pozíciu (zľava) vypíšem všetky
tie výrazy, ktoré sa líšia. 

\paragraph{Príklad} Majme množinu $W = \{P(x,\underline{f(y,z)},
P(x,\underline{a}), P(x,\underline{g(h(k(x)))}) \}$
Diferenčnou množinou bude $D= \{ f(y,z), a, f(h(k(x)))\}$. 

\subsection{Unifikačný algoritmus}

Kroky:
\begin{enumerate}
	\item $k=0, W_0 = W, \sigma_0 = \Sigma$
	\item Ak $W_k$ je jednotková klauzula, algortimus zakončí svoju činnosť
	$\sigma_k$ je najvšeobecnejší unifikátor. V opačnom prípade nájdeme $D_k$
	(diferenčnú množinu) pre $W_k$.
	\item Ak existujú také premenné $v_k$ a $t_k$ v $D_k$, že $v_k$ je
	premenná, ktorá sa nevyskytuje v $t_k$, tak prejdeme ku kroku 4. V
	opačnom prípade algoritmus zakončuje svoji činnosť. Množina $W$ nie je
	unifikovateľná.
	\item Nech $W_{k+1} = W_k \{t_k/v_k\}$, $\sigma_{k+1} = \sigma_k \circ
	\{t_k/v_k\}$ ($W_{k+1} = W_k \sigma_{k+1}$)

	\item Vypíšeme hodnoty pre $k+1$ a prejdeme ku kroku 2.
\end{enumerate}


Ak je množina unifikovateľná, vždy existuje najvšeobecnejší unifikátor.

\paragraph{Príklad}
Nájdite najvšeobecnejší unifikátor pre množinu: $$W=\{ P(a,x,f(g(y))),
P(z,f(z),f(u)), \}$$

\begin{enumerate}
	\item $\sigma_0 = \varepsilon, W_0 = W$. Pretože $W_0$ nie je jednotková
	klauzula, $\sigma_0$ nie je najvšeobecnejší unifikátor.
	\item Musíme zostrojiť diferenčnú množinu $D_0 = \{a, z\}$. Existuje
	premenná $v_0 = z$, ktorá nie je obsiahnutá v terme $t$. $t_0 = a$.
	\item $$\sigma_1 = \sigma_0 \circ \{ t_0/v_0 \} = \epsilon \{a/z\} =
	\{a/z\}$$ $W_1 = W_0\{ t_0/v_0 \} = \{P(a,x,f(g(y)),
	P(z,f(z),f(u))\}\{a/z\} =  \\
	= \{P(a,x,f(g(y))), P(a, f(a), f(u))\}$

	\item $W_1$ nie je jednotková klauzula. Zostrojíme diferenčnú množinu
	$D_1$ pre $W_1$. $D_1 = \{x_1, f(a)\}$

	\item Z $D_1$ dostávame $v_1 = x$ a $t_1 = f(a)$.
	\item $$\sigma_2 = \sigma_1 \circ \{ t_1/v_1\}= \{a/z\} \circ \{ f(a)/x\}
	= \{a/z, f(a)/z \}$$
	$ W_2 = W_1 \{t_1/v_1\} = \{P(a,x,f(g(y))), P(a,f(a),f(u)\} \{ f(a)/x
	\} = \\
	= \{ P(a,f(a), f(g(y))), P(a,f(a), f(u), \}$. $W_2$ opäť nie je
	jednotková klauzula -- musíme vytvoriť diferenčnú množinu.

	\item $W_2$ nie je jednotková klauzula -- vytvárame diferenčnú množinu
	$D_2$ pre $W_2$. $D_2 = \{ g(y), u \}$. $v_2 = u$, $t_2 = g(y)$.

	\item $$\sigma_3 = \sigma_2 \circ \{t_2/v_2\} = \{a/z, f(a)/x\} \circ
	\{g(y)/u\}$$.
	$W_3 = W_2 \{ t_x/v_2\} = \{ P(a,f(a), f(g(y))), P(a,f(a),
	f(u))\}\{g(y)/u\} = \\
	= \{ P(a, f(a), f(g(y))), f(a, f(a), f(g(y)) \}$.
	$W_3$ je jednotková klauzula.
	$$ \sigma_3 = \{ a/z, f(a)/x, g(y)/u\}$$. $\sigma_3$ je najvšeobecnejší
	unifikátor pre množinu klauzúl $W$.
\end{enumerate}

\paragraph{Príklad}

\paragraph{Príklad} Zistitte, či je unifikovateľná množina $W=\{Q(f(x),g(x)),
Q(y,y)\}..$


	$$y\circ \sigma_0 \varepsilon \qquad \mbox{a} \qquad W_0 = W$$
$W_0$ nie je jednotková klauzula. Nájdeme diferenčnú množinu $D_0$ pre $W_0$:
$$D_0 = \{ f(a)/y \}$$
$$v_0, t_0 = f(a)$$

Nech $\sigma_1 = \sigma_0 \circ \{ t_1/\sigma_0\} = \varepsilon \circ  \{
f(a)y\}$

$W_1 = W_0 \{ t_0/\sigma_0\} = \{ Q(f(x),g(x)), Q(f(a),f(a))\}$

$W_1$ nie je jednotková klauzula, zostrojujeme $D_1$, diferenčnú množinu
pre $W_1$.


$$D_1 = \{ g(x), f(a)\}$$ nemáme prvok, ktorý by bol premennou. Algoritmus
ukončí svoju činnosť a $W$ nie je unifikovateľná.

\par Pri zisťovaní unifikovateľnosti vždy vytvárame množiny $W$ tvaru:
$$W\sigma_0, W\sigma_1, \ldots, W\sigma_k, \ldots$$, pričom v každom kroku sa
zmenší počet premenných o 1. Po konečnom počte krokov sa musí zastaviť.


\paragraph{Veta (unifikačná):} Ak $W$ je konečná neprádzna unifikačná množina
výrazov, tak unifikačný algoritmus vždy zakončuje svoju činnosť na druhom kroku
a posledné $\sigma_k$ bude najvšeobecnejší unifikátor.

\paragraph{Dôkaz:} $W$ je unifikovateľná množina, $\Theta$ označuje jej
ľubovoľný unifikátor. Indukciou ukážeme, že pre každé $k$ existuje taká
substitácia $\lambda_k$, že $\Theta = \sigma_k \circ \lambda_k$

\subparagraph{Báza indukcie} Nech $k = 0$. Máme ukázať, že $\Theta = \sigma_0
\circ \lambda_0$. V tomto prípade $\sigma_0 = \varepsilon$ a $\lambda_0 =
\Theta$.

\subparagraph{Indukčný krok} Indukčný predpoklad: $\Theta = \sigma_k \circ
\lambda_k$ $(0 \leq k \leq n)$. $W_n = W\sigma_n$. Ak $W_n$ je jednotková
klauzula, tak algoritmus zakončuje svoju činnosť na druhom kroku a $\sigma_n$ je
najvšeobecnejší unifikátor pre $W$. 
\par Nech $W_n$ nie je jednotková množina. Potom hľadám diferenčnú množinu $D_n
$ pre množinu $W_n$. Keď $D_n$ je diferenčná množina pre $W_n$, tak vo $W_n$
musí existovať premenná -- označme ju $v_n$. Ďalej nech $t_n$ je ľubovoľný výraz
z $D_n$ rôzny od $v_n$.

$$\Theta = \sigma_n \circ \lambda_n$$ 
$\Theta$ je unifikátor. Diferenčnú množinu $D_n$ unifikuje substitúcia
$\lambda_n$. $v_n \lambda_n = t_n \lambda_n$.

\par Ak by premenná $v_n$ bola obsiahnutá v $t_n$. Predpokladali sme, že $v_n$ a
$t_n$ sú rôzne a teda $v_n$ sa nemôže vyskytovať v $t_n$.

\par Prejdeme ku kroku 4 -- množine $W\sigma_{n+1}$ (množina $W_{n+1}$). Platí,
že $\sigma_{n+1} = \sigma-n \circ \{ t_n/v_n \}$. $\Theta = \sigma_{n+1} \circ
\lambda-{n+1}$.

\par Nech $\lambda_{n+1} = \lambda_n - \{t_n\lambda_n/v_n\}$. 

$$t_n\lambda_{n+1} = t_n (\lambda_n - \{t_n\lambda_n / v_n\}) -  t_n\lambda_n$$
$$\{ t_n / v_n\} \circ \lambda_{n-1} = \{t_n \lambda_{n+1}\}/v_n \cup
\lambda_{n+1} = \{t_n\lambda_n /v_n\} \cup \lambda_{n+1} = \{t_n\lambda_n/v_n\}
\cup \{ \lambda_n - \{ t_n\lambda_n/v_n\} = ??? \{ t_n/v_n \} \circ
\lambda_{n+1} = \lambda_n$$

$$\Theta = \sigma_n \circ \lambda_n$$.

\section {Metóda rezolvent pre logiku 1. rádu}

\paragraph{Definícia:} Nech $C$ je klauzula; ak dva alebo viac literálov (s
rovnakým znakom predikátu) Majú najvšeobecnejší unifikátor $\sigma$, tak
$C\sigma$ sa nazýva \emph{spojením $C$}. Ak $C\sigma$ je jednotková klauzula,
tak $C\sigma$ nazývame \emph{jednotkovým spojením $C$}.


\paragraph{Príklad} Uvažujme klauzulu $C$, ktorá vyzerá nasledovne: $C = \{ P(x)
\lor P(f(y)) \lor \neg Q(x)\}$. 

\paragraph{Definícia:} Nech $C_1$ a $C_2$ sú klauzuly (nazývame ich
predpoklady), ktoré nemajú spoločné premenné. Nech $L_1 \in C_1$ a $L_2 \in
C_2$ sú dva literály . Ak $L_1$ a $\neg L_1$ majú najvšeobecnejší unifikátor
$\sigma$, tak:
$$(C_1\sigma - L_1\sigma) \lor (C_2\sigma - L_2\sigma)$$

sa nazýva binárnou rezolventou ..... $C_1$ a $C_2$. Literály $L_1$ a $L_2$ nazývame
nadbytočné a môžu sa odstrániť.

\paragraph{Príklad} $C_1 = p(x) \lor Q(x), C_2 = \neg P(x) \lor R(x)$, $C_1$,
$C_2$ -- predpoklady. $C_2 = \neg P(a) \lor R(y)$.

$$L_1 = P(x), L_2 = \neg P(x)$$
$$\neg L_2 = P(x)$$
$$L_1, \neg L_2, \sigma = \{a/x\}$$

Binárna rezolventa $C_1$ a $C_2$ $(C_1\sigma - L_1\sigma) \lor (C_2\sigma -
L_2\sigma) = (\{P(a),Q(a))\} - \{P(a)\}) \lor (\{\neg P(a),R(y)(\}-\{\neg
P(a)\}) = \{Q(a)\lor R(y)\}$

\paragraph{Definícia} Rezolventou z predpokladov $C_1$ a $C_2$ je jedna z
nasledujúcich rezolvent:
\begin{enumerate}
	\item Binárna rezolventa $C_1$ a$C_2$
	\item Binárna rezolventa $C_1$ a spojenia $C_2$
	\item Binárna rezolventa spojenia $C_1$ a $C_2$
	\item Binárna rezolventa spojenia $C_1$ a spojenia $C_2$
\end{enumerate}

\paragraph{Príklad} $$C_1 = P(x) \lor P(f(y))\lor Rg(y))$$
$$ C_2 = \neg P(f(g(a)) \lor Q(b)$$
Spojenie pre $C_1$ vyzerá ako: $C_1': P(f(y)) \lor R(g(y))$.
Binárna rezolventa $C_1' a C_2$ bude vyzerať takto: $R(g(g(a))) \lor Q(b)$ --
rezolventa $C_1$ a $C_2$.


\section{Opakovanie}
	Ak množina klauzúl nie je splniteľná, potom metódou rezolvent z nej vždy
	môžeme dostať prázdnu klauzulu (a ak sa táto dostane množiny klauzúl,
	tak formula nie je splniteľná v žiadnej interpretácii). Ak máme nejakú
	klauzulu $C$, $C\sigma$ sme nazývali spojením klauzuly $C$. Definícia
	binárnej rezolventy. 

\par  Metódu rezolvent zaviedol roku 1965 Robinson, je efektívnejšia ako obe
varianty Herbrandovej metódy. 

\par \{ sleep...\}

\paragraph{Úplnosť metódy rezolvent}

\paragraph{Príklad} Majem množinu klauzúl $S$:
\begin{enumerate}
	\item $P$
	\item $\neg P\lor Q$
	\item $\neg P \lor \neg Q$
\end{enumerate}
Tejto množine klauzúl zodpoveda uzavretý sémantický strom.
Prislúchajúca herbrandovská báza je $\{P, Q\}$ (na tabuľu sa kreslí sémantický
strom pre $P$ a $Q$, usilovný čitateľ si ho isto domyslí). Každá vetva sa končí
odmietajúcim vrcholom, žiadna z tých interpretácií, ktoré končia v listoch, nie
je splniteľná. Tomuto stromu môžeme priradiť uzavretý podstrom (označíme ho
$T'$,  má odseknuté vetvy na miestach, kde sú podstromy odmietajúce)


\begin{verbatim}
            T
            /\
         P /  \ \neg P
       Q /\ nQ Q/\ nQ 
\end{verbatim}

\begin{verbatim}
            T'
            (1)
            /\
      (2)P /  \ \neg P
   (4) Q /\ nQ x (5)
       x   x
\end{verbatim}

\par $\neg P$ -- rezolventa $(4)$, $(5)$, $\neg P \cup S$.  $S\cup \{ \neg P
\}\cup \{ \square \}$.

\par Vznikli nám teda klauzuly.
$$(4) \neg P\qquad (2) (3)$$
$$(5) \Box\qquad (4)(1)$$

\par Strom sa po každej aplikácii pravidla postupne skracuje. 

\paragraph{Lema} Nech $C_1'$ a $C_2'$ sú inštancie $C_1$ resp. $C_2$ (v uvedenom
poradí). Ak $C'$ je rezolventa $C_1'$ a $C_2'$, tak potom existuje rezolventa
$C$ klauzúl $C_1$ a $C_2$, že $C'$ je inštancia $C$. 

\paragraph{Dôkaz} Ak je treba, premenujeme premenné $C_1$ a $C_2$. Nech $L_1'$ a
$L_2'$ sú literály, ktoré môžeme vynechať (sú nadbytočné). ďalej nech platí:
$$C' = (C_1' \nu - L_1'\nu) \cup ( C_2'\nu - L_2'\nu)$$
Pričom $\nu$ je najvšeobecnejší unifikátor pre $L_1'$ a $\neg L_2'$. $C_1'$,
$C_2'$ sú inštancie $C_1$ a $C_2$, a teda existuje substitúcia $\Theta$ taká, že
platí:

$$ C_1' = C_1 \Theta $$
$$ C_2' = C_2 \Theta $$

(Pozn.: $C_1$ a $C_2$ nemajú spoločné premenné). $L^1_i, L^2_i, \ldots, L^{r_i}_i,
i=1,2$ sú literály, ktoré v $C_1$ zodpovedajú $L_i'$, teda $L^1_i \Theta = L^2_i
\Theta = \cdots = L^{r_i}_i\Theta = L'_i (i=1,2)$. $D_i > 1$ dostaneme
najvšeobecnejší kvantifikátor $\lambda_i (i=1,2)$ pre $\{ L^1_i, L^2_i, \ldots,
L^{r_i}_i\}, L_i = L^1_i \lambda_i (i=1,2)$. $\lambda_i$ je najvšeobecnejší
unifikátor, tak pre vhodnú substitúciu $\xi$ platí:
$$ L_i' = L^1_i \Theta = L^1_i (lambda_i \circ \xi) = (L^1_i\lambda_i)\xi =
L_i \xi$$

$$L_i\xi = L_i'$$

$L_i$ .. spojení $C_i\lambda_i$, pre $C_i$, ak $r_i = 1$, ak $r_i = 1$, potom
$\lambda_i = \Sigma$, $L_i = L_i^1\lambda_i$.

$$ \lambda = \lambda_1 \cup \lambda_2$$
$$L_i' = \mbox{...} L_i$$

$L'_i, \neg L_2'$ -- unifikovateľné.
$L-1, \neg L_2$ -- unifikovateľné.

Označme $\sigma$ najvšeobecnejší unifikátor pre $L_1'$ a $\neg L_2'$.

$C= ((C_1\lambda)\sigma = L_1\sigma) \cup
((C_2\lambda_2)\sigma-L_2\sigma) = ((c_1\lambda)\sigma - (\{L^1_+, L^2_1,
\ldots, L^{r_i}_1 ...
= C_1(\lambda\circ \sigma) = \{ L^1_1, \ldots L^{r_1}_1 \} (\lambda\circ\sigma)
\cup C_2)(\lambda\circ\sigma) - \{L^1_2, \ldots
L^{r_i}_1\}(\lambda\circ\sigma)$

\par $C$ -- rezolventa $C_1$ a$C_2$, $C'$ je substitúcia $C$:
$C = (C_1' \nu = L_1' \nu) \cup (C_2'\nu = L_2'\nu) = (C_1\Theta)\nu -
(\{L^1_1, \ldots L^{r_i}_1\}\Theta)\nu)\cup ((C_2\Theta)\nu - \{L^1_2, L^2_2,
\ldots, L^{r_i}_2\}\Theta )\nu) = 
C_1(\Theta\circ\nu) - \{L^1_1, \ldots, L^{r_i}_1\} \Theta\circ\nu) \cup
(C_2(\Theta\circ\nu) - \{L^1_2, \ldots L^{r_i}_2\} \Theta\circ\nu)
$

$\lambda \circ \sigma$ jke všeobecnejšia ako $\theta \circ \nu$.


\paragraph{Veta (úplnosť metódy rezolvent)} Množina klauzúl $S$ nie je
splniteľná práve vtedy, keď existuje odvodenie prázdnej klauzuly $\Box$ z $S$.

\paragraph{Dôkaz} Predpokladajme, že z $S$ existuje odvodenie prázdnej klauzuly
$\square$. $R_1, R_2, \ldots R_n$ sú všetky rezolventy v odvodení (medzi nimi
niekde bude aj $\square$). Zoberiem $C_1$, $C_2$ -- ľubovoľné klauzuly z $S$ a
$C_1$ a $C_2$ bude príslúchať nejaká rezolventa. Ak sú klauzuly splniteľné, je
splniteľná aj rezolventa. To znamená, že $C_1$ a $C_2$ nemôžu byt splniteľné a
teda nemôže byť množina klauzúl (klauzuly, ktorých rezolventou je prázdna
klauzula, nebudú splniteľné nikdy). 

\subparagraph{Obrátené tvrdenie} Prepokladajme, že množina klauzúl $S$ nie je
splniteľná (máme ukázať, že ako rezolventa sa tam ukáže prázdna klauzula). Ak
predpokladáme, že $S$ nie je splniteľná, potom podľa Herbrandovej vety (1.
variant), nie je splniteľná práve vtedy, keď je možné jej priradiť konečný
uzavretý sémantický strom. 

\par Môže as stať, že strom $T$ pozostáva jedine z koreňa -- odmieta jedinú
klauzulu a v tomto prípade veta platí. Teraz predpokladajme, že je konečný a má
viac ako 1 vrchol. V tomto prípade, tak má aspoň jeden akceptujúci vrchol. Potom
$i_v$ je čiastočná interpretácia končiaca v tom vrchole. Ďalej, každý
nasledovník je odmietajúci. Vrchol je akceptujúci, ak čiastočná interpretácia v
ňom existuje, a každý nasledujúci vrchol je odmietajúci.

\par Predpokladajme, že by tento strom nema akceptujúci vrchol. Potom každý
vrchol obsahuje nasledovníka, ktorý nie je odmietajúci. Týmto pádom by sme
vytvorili nekonečne dlhú vetvu, čo je spor (strom je konečný).

\par Ideme pracovať s akceptujúcim vrhcholom. Nech $v$ je akceptujúci vrchol
stromu $T$ a $v_1$, $v_2$ sú odmietajúci nasledovníci $v$. $I(v)$ (čiastočná
interpretácia končiaca vo vrchole $v$) vyzerá nasledovne:

\begin{align*}
    I(v)    &= \{ m_1, m_2, \ldots, m_n \} \\
    I(v_1)  &= \{ m_1, m_2, \ldots, m_n, m_{n+1} \}  \\
    I(v_2)  &= \{ m_1, m_2, \ldots, m_n, \neg m_{n+1} \} 
\end{align*}

$C_1'$ a $C_2'$ sú dve základne inštancie klauzúl $C_1$ a $C_2$ -- $C_1'$ a
$C_2'$ neplatia v $I(v_1)$ a $I(v_2)$. $C_1'$ a $C_2'$ sa neodmietajú v $I(v)$.
$C_1'$ musí obsahovať $\neg m_{n+1}$ a $C_2'$ musí obsahovať $m_{n+1}$. $L_1' =
\neg m_{n+1}$ a $L_2' = m_{n+1}$. AAk vynecháme $L_1'$ a $L_2'$, dostaneme
rezolventu. $C'$ je rezolventa $C_1$ a $C_2$. $C' = (C_1' - L_1') \cup (C_2' =
L_2')$. $C'$ -- musí byť nepravdivá v $I(v)$. Podľa predchádzajúcej lemy musí
existovať rezolventa $C$ taká, že $C'$ je základná inštancia $C$.

\par Vezmime si $T''$ -- uzavretý sémantický strom, $C \cup \{C\}$. ... (niečo
ďalej?)



\paragraph{Príklad} Majme množinu formúl $F_1: (\forall x) (C(x) \implies (W(x)
\land R(x))$, $F_2: (\exists x)(C(x) \land Q(x))$ $G: (\exists x) (Q(x) \land
R(x))$. Ukážte, že $G$ je logickým dôsledkom $F_1$ a $F_2$.

\paragraph{Riešenie} Pre $F_1$, $F_2$ a $\neg G$ vytvoríme štandardné formy.
Dostávame nasledujúcich 5 klauzúl:
\begin{enumerate}
	\item $(\forall x) (C(x) \implies (W(x) \land R(x)) \iff (\forall
	x)(\neg C(x) \lor (W(x)\land R(x)) \iff (\forall x) ((\neg C(x) \lor
	W(x)) \land (\neg C(x) \lor R(x)))$
	\par (1) $\neg C(x) \lor W(x)$ -- $F_1$
	\par (2) $\neg C(x) \lor R(x)$ -- $F_1$
	\par $C(a)$ -- $F_2$
	\par $Q(a)$ -- $F_2$
\end{enumerate}
$$\neg G \iff \neg (\exists x)(Q(x)\land R(x)) \iff (\forall x) (\neg Q(x) \lor
\neg R(x)) $$. Štandardná formula pre túto formulu je:
\par (5) $\neg Q(x) \lor \neg R(x)$ -- $G$.

\par Rezolventy: 
\par (6) $R(a)$ -- rezolventa (2), (3)
\par (7) $\neg R(a)$ ($\sigma = \{a / x \})$ -- rezolventa (5), (4)
\par (8) $\square$ -- rezolventa (6), (7)

\par Záver: $G$ je logickýkm dôsledkom $F_1$ a $F_2$

\section{Stratégia vymazávania}
Na základe vety o úplnosti, majme nejakú množinu klauzúl $S$, postupne si z nej
vytváram rezolventy. Ak nie je splniteľná, po konečnom počte krokov dostávam
prázdnu klauzulu.

\paragraph{Príklad} Majme množinu klauzúl $S=\{P\lor Q, \neg P\lor Q, P \lor
\neg Q, \neg P \lor \neg Q\}$. Metódou rezolvent ukážte, že $S$ nie je
splniteľná.

\par nejakým spôsobom zostrojujeme postupnosť klauzúl, nakoniec niekde dostanem
prázdnu klauzulu. 
$S^0 = S$, $S^n = \{ \mbox{rezolventy} C_1, C_2 | C_1 \in S^0 \cup S^1,
\ldots \cup S^{n-1} \land C_2 \in S^{n-1}\}, n=1, 2, \ldots$. Takýmto spôsobom
by sme po $39$ krokoch dostali odpoveď. Niektoré klauzuly sa vyskytnú v
popísanom prístupe dvakrát. Môžu sa tam vyskytnúť tautológie.


\paragraph{Definícia} Klauzula $C$ je podklauzulou klauzuly $D$ (alebo pohlcuje
$D$) práve vtedy, keď existuje substitúcia $\sigma$ taká, že platí $C\sigma
\subseteq D$. $D$ nazývame nadklauzulou $C$.

\paragraph{Príklad} $C = P(x)$, $D = P(A) \lor Q(a)$, $\sigma = \{a/x\}$,
$C\sigma = P(a)$, $C\sigma \subseteq D$.

\paragraph{Poznámka} $D$ je identicky rovná $C$. (??)
Ak klauzula $D$ je inštancia $C$, tak $D$ je nadklauzula $C$. (??). 

\par
Možno to sformulovať takto: Majme $(S^0 \cup S^1 \cup \ldots \cup
S^{n-1}\}$, berieme z nej klauzulu $C_1$ a $C_2$. V prípade, že ako rezolventa
$C_1$ a $C_2$ nevznikne tautológia a nebude to ani nadklauzula niektorej z tých,
ktoré sú už vypísané, vypíšem ju. Takto sa zbavujem tautológií a nadklauzúl.

\paragraph{Príklad} $S=S^0$ a :
\begin{itemize}
	\item $P\lor Q$
	\item $\neg P \lor Q$
	\item $P\lor \neg Q$
	\item $\neg P \lor \neg Q$
\end{itemize}
$$
S_1:
\begin{array}{ll}
(5)& Q (1) (2)\\
(6)& P (1) (3)\\
(7)& \neg P (2) (4)\\
(8)& \square (6) (7)\\
\end{array}
$$

$$\theta = \{ a_1 / x_1, a_2 / x_2, \ldots, a_n / x_n \}$$. $x_1, x_2, \ldots
x_n$ sú premenné, ktoré sa vyskytujú v $D$. $a_1, a_2, \ldots a_n$ sú nové
konštanty, kotére sa nevyskytujú v $C$, $D$.

$D\Theta$ je základná... .

$$D = L_1 \lor L_2 \lor \ldots \lor L_m$$
$$D \theta = L_1\Theta \lor L_2 \Theta \lor \ldots \lor L_m \Theta$$
$$\neg D\Theta = \neg L_1 \Theta \land \neg L_2 \Theta \land \ldots \land \neg
L_m \Theta$$
Algoritums preveruje, či klauzula $C$ je podklauzulou $D$.

\paragraph{Algoritmus  pohltenia}
\begin{enumerate}
	\item Nech $W = \{ \neg L_1 \Theta, \neg L_2 \Theta, \ldots, \neg L_m
	\Theta \}$

	\item Kladieme $k=0$ a $\mathcal{U}^0 = \{ C \}$
	\item Ak $\mathcal{U}^k$ obsahuje $\square$, tak koniec $C$ je pod D. V
	opačnom prípade kladieme $\mathcal{U}^{k+1} = \{ \mbox{rezolventa} C_1 a
	C_2 | C_1 \in \mathcal{U}^{k} \land C_2 \in U\}$. 
	\item Ak $\mathcal{U}^{k+1}$ je $\emptyset$, tak koniec, $C$ nie je
	podklauzula $D$. V opačnom prípade kladieme $k=k+1$ a prejdeme ku kroku

\end{enumerate}

\paragraph{Poznámka} $\mathcal{U}^k, \mathcal{U}^{k+1}$, klauzuly z
$\mathcal{U}^{k}$ sú konečné. $\mathcal{U}^0, \mathcal{U}^1, \ldots \square$.

\paragraph{Dôkaz} Predpokladajme, že $C$ je podklauzula $D$. Na základe našej
definície existuje substitúcia $\sigma$, že $C\sigma \subseteq D$. Teda
$C(\sigma \circ \Theta) \subseteq D\Theta$. Literály z $C\sigma \circ \Theta$
môžeme vynechať pomocou jednotkových klauzúl z $W$. ... Algoritmus skončí svoju
činnosť.
\par
Obrátené tvrdenie: predpokladajme, že algoritmus zakončuje prácu na treťom
kroku. Odmietnutie môžeme znázorniť nasledujúcim obrázkom:

%pic1

$$C_0, N_1 ,\ldots B_r \in W$$
$$C(\sigma_0 \circ \sigma_1 \circ \sigma \circ \sigma_r) = \{ \neg B_0, \neg
B_1, \ldots \neg B_r\} \subseteq D\Theta$$
$$\lambda = \sigma_0 \circ \sigma_1 \circ \sigma_2 \ldots \circ \sigma_r \implies
C \lambda \subseteq D\Theta$$

$\sigma$, ktorá dostaneme z $\lambda$ tak, že v každom komponente $\lambda$
nahradíme  konštantu $a_i$ premennou $x_i$, $i=1, 2, 3, \ldots$. $C\sigma
\subseteq D$. $C$ je pod $D$.

\paragraph{Príklad} $C = \neg P(x) \lor Q(f(x), a)$. $D = \neg P(h(y)) \lor
Q(f(h(y)),a) \lor P(z)$. Zistite, či klauzula $C$ je podklauzulou $D$.

\par $y$ a $z$ sú premenné v $D$. $\Theta = \{ b/y, c/z\}$. Konštanty $b$, $c$
nevystupujú v $C$, $I$. najprv vypočítame $D\Theta \neg P(h(b)) \lor
Q(f(h(b)),a) \lor \neg P(c)$

$$\neg D \Theta = P(h(b)) \land \neg Q(f(h(b)),a) \ lor P(c)$$
$$W = \{P(h(b)), \neg Q(f(h(b)),a), P(c) \}$$
$$\mathcal{U}^0 = C = \neg P(x) \lor Q(f(x),a)\}$$
$\mathcal{U}^0$ neobsahuje $\square$, musíme vytvoriť $\mathcal{U}^1$. Urobíme
príslušnú substitúciu v množine $\mathcal{U}^0$. Dostávam nasledovné rezolventy:
$$\mathcal{U}^1 = \{ Q(f(h(b)),a), \neg P(h(b)), Q(f(b),a)\}$$. 
\par
$\mathcal{U}^1$
nie je prádzna a neobsahuje prádznu klauzulu -- musím vytvoriť $\mathcal{U}^2$.
V tomto sa už vyskytne prádzna klauzula, čo znamená, že $C$ pohlcuje klauzulu
$D$.


\paragraph{Príklad 1} $C=P(x,x)$ a $D=P(f(x),y) \lor P(y,f(x))$. Zistite, či $C$
je podklauzula $D$.

\paragraph{Riešenie} (1) $x$, $y$ sú premenné v $D$. $a$ a $b$ sú konštanty,
ktoré sa nevyskytujú $C$, $D$. $\Theta = \{ a/x, b/y\}$. $D\Theta = P(f(a),b), \lor P(b,
f(a))$.

$$\neg D\Theta = \neg P(f(a),b) \lor \neg O(b,f(a))$$
$$W = \{ \neg P(f(a),b), \neg P(b,f(a))\}$$
$$\mathcal{U}^0 = P(x,x)$$


\par (2) $\mathcal{U}^0$ neobsahuje $\square$, tak sa môže zistiť
$\mathcal{U}^1$
\par (3) $\mathcal{U}^1 = \emptyset$. Záver: $C$ nie je podklauzula $D$.


\paragraph{Príklad 2} Majme formuly:

\begin{enumerate}
	\item $P\implies S$
	\item $S \implies U$
	\item $P$
	\item $U$
\end{enumerate}

Dokážte, že formula 4 vyplýva z formúl 1, 2 a 3. 

\paragraph{Riešenie} Prepíšeme si formuly do správneho tvaru, aby sme mohli
použiť pravidlo rezolventy:
\begin{enumerate}
	\item $\neg P \lor S$
	\item $\neg S\lor U$
	\item $P$
	\item $U$
\end{enumerate}
Snažíme sa nájsť negáciu -- chceme ukázať, že 
\begin{enumerate}
	\item $\neg P \lor S$
	\item $\neg S\lor U$
	\item $P$
	\item $\neg U$
\end{enumerate}

nie je splniteľná. Zoberiem si rezolventu 1 a 3, dostávam $S$ (5). Keď zoberiem 
2 a 4, dostávam $\neg S$ (6). Zoberiem 5 a 6, dostávam $\square$ (7).

\paragraph{Príklad 3} Predpoklad: Študenti sú občania. Záver: Hlasy študentov sú
hlasy občanov.

\paragraph{Riešenie} 
\begin{itemize}
	\item $S(x)$ označuje \uv{$x$ je študent}.
	\item $C(x)$ označuje \uv{$x$ je občan}.
	\item $V(x,y)$ označuje \uv{$x$ je hlas $y$}.
\end{itemize}
Predpoklad: $(\forall y) (S(y)\implies C(y))$. Študenti sú občania.
Záver: $(\forall x) ((\exists y) (S(y) \land V(x,y)) \implies (\exists z)(C(z)
\implies V(x,z)))$. Hlasy študentov sú hlasy občanov.

Aká bude štandardná forma pre vyjadrenie predpokladu?
\begin{enumerate}
	\item $\neg S(y) \lor C(y)$
		\par $\neg ((\forall x) ((\exists y)(S(y)\land V(x,y)) \implies
		(\exists x)(C(z) \land V(x,z)))) \iff 
		\neg ((\forall x)(\forall y)(\neg S(y)\lor \neg V(x,y)) \lor
		(\exists z)(C(z)\land V(x,z))) \iff 
		\neg ((\forall x)(\forall y)(\exists x)(\neg S(y) \lor
		\neg U(x,y)\lor (C(z) \land V(x,z)))) \iff
		(\exists x)(\exists y)(\forall z) (S(y) \land V(x,y)) \land
		(\neg C(z) \lor \neg V(x,z))$
		Teraz potrebujeme Skolemov normálny tvar:
		$(\forall z)(S(b) \land U(a,b)) \land(\neg C(z) \lor \neg
		V(a,z)))$
		\par Pre negáciu záver dostávane nasledujúce klauzuly:
	\item $S(b)$
	\item $V(a,b)$
	\item $\neg C(z) \lor \neg V(a,z)$.

	\item $C(b)$ z (1) a (2) (miesto $y$ dosadíme $b$)
	\item $\neg V(a,b)$ zo (4) a (5)
	\item $\square$ z (3)  a (6)
\end{enumerate}

\par Predpokladajme, že $b$ je študent, $a$ je hlas študenta $b$ a nie je hlas
žiadneho občana. Pretože $b$ je študent, $b$ je občan. Okrem toho $a$ nemôže byž
hlas $b$, pretože $b$ je občan a to nie je možné.

\section{Rozširovanie teórie}
\paragraph{Veta} Nech $A$ je formula teórie $T$ s jazykom $L$, nech všetky voľné
premenné formuly $A$ sú $x_1, x_2, \ldots x_n$, ďalej nech $L'$ je rozšírenie
$L$ pridaním nového predikátového symbolu $P$ a nech $T'$ vznikne z $T$ pridaním
axiomy $P(x_1, \ldots x_n) \iff A$ (označme ju *). 
\par Potom teória $T'$ s jazykom $L'$ je konzervatívne rozšírenie teórie $T$ s
jazykom $L$. Ďalej, pre každú formulu $B$ jazyka $L'$ existuje formula $B^*$ z
jazyka $L$, že platí $T \models  B \iff B^*$. 

\par Najprv budeme konštruovať $B^*$. Dôkaz: Nech $B$ je formula na jazyku $L'$,
nech $A'$ je variant  formuly $A$ (definujúcej predikát $P$), že žiadna
premennáz formuly $B$ nie je viazaná vo formule $A'$.

\par Nech $B^*$ vznikne z $B$ tak, že každú podformulu $P(a_1, \ldots a_n)$
nahradíme podformulou $A'(a_1, \ldots a_n)$ a podľa vety o variantoch nám platí,
že:
$$ T' \models P(a_1, \ldots, a_n) \iff A'(a_1, \ldots a_n)$$
$$ T' \models B \iff B^*$$.

\par Ukážeme, že $T'$ v jazyku $L'$ je konzervatívne rozšírenie teórie $T$ v
$L$ (teda pre ľubovoľnú formulu na pôvodnom jazyku, ktorá je dokázateľná v
teórii $L'$, je dokázateľná aj v pôvodnej teórii --  nevzniknú žiadne nové
teorémy). Nech $C$ je ľubovoľné formula na jazyku $L'$, ďalej nech platí $T'
\models C$. Nám stačí dokázať, že $T \models C^*$. Ak je potom formula $C$ na
jazyku $L$, potom $C^*$ je $C$.
\par Uvažujme $C_1, C_2, \ldots C_n$ je odvodenie formuly $C$ v teórii $T'$. Nám
stačí ukázať, že $C_i^*$ sú dokázateľné (odvoditeľné) v $T$.

Pri odvodení $C$ sa môže stať nasledovné:
\begin{enumerate}
	\item $C_i$ je axioma predikátovej logiky $L$, potom $C_i^*$ je axioma
	rovnakého druhu
	\item $C_i$ je axioma z $T$, potom $C_i^*$ je $C_i$ a teda je
	dokázateľná z $T$.
	\item Môže sa stať, že $C_i$ je axioma (x) $P(x_1,  \ldots, x_n) \iff
	A(x_1, \ldots, x_n)$. \par $C_i^*: A_i \iff A_i$, je dokázateľná pomocou
	vety o variantoch.
	\item Ak $C_i$ je odvodená z $C_j$ a $C_k$, použijeme pravidlo modus
	ponens. $C_i^*$ je odvodené z $C_j^*$ a $C_k^*$ tým istým pravidlom.
	\item $C_i$ je odvodené z $C_k$ pravidlom zovšeobecnenia ($k<i$). Potom
	$C_i^*$ je odvodené z $C_k^*$ pomocou toho istého pravidla.
\end{enumerate}



Ak máme teóriu $T$ a každá jej $A \in T$ je otvorená (každá premenná je voľná),
hovoríme o otvorenej teórii.

\par Majme danú teóriu $T$ s jazykom $L$. Máme k nej zostrojiť teóriu $T_H$
(henkinova teória) s jazykom $L(C)$, kde $C$ je zjednotenie konštánt všetkých
rádov. Dôležité pre nás budú konštanty $c_A, c_{\neg A}$.

\begin{itemize}
	\item $A_{c_{\neg A}} \implies (\forall x) A$ (*)
	\item $(\exists ) A \implies A(c_A)$ (**)
\end{itemize}

$$A \iff \neg \neg A$$
$$c_{\neg A} \iff \neg A(x)$$
$$\neg A(c_{\neg\neg A}) \implies (\forall x)\neg A$$
$$(\exists x) A \implies A(c_{\neg\neg A})$$
(Použili sme prenexnú operáciu).

\par Ak $c_{\neg A}$ je konštanta z axiomy s (*), tak hovoríme, že prislúcha
(patrí) formule A. Keď zoberieme formulu $A$.

$$(\forall x) A \implies A(t)$$ -- $t$ je term bez premenných v $L(C)$

$$A_{[c_{\neg A}]} \implies (\forall x) A \mbox{.......} c_{\neg A}$$

$\delta(T)$ množina na jazyku $L(C)$ prislchajúu konštante $C$ má ... axiomy
identity a ... a formúl z $T$.


\paragraph{Lema 1} Nech $A$ je formula na jazyku $L$ a ďalej, nech $A'$ je
uzavretá inštancia formuly $A$ na jazyku $L(C)$. Ak platí, že formula $A$ je
dokázateľná v pôvodnej teórii, potom $A'$ je tautologickým dôsledkom konečne
mnoho formúl z $\delta(T)$

\paragraph{Dôkaz} Nech $A_1, A_2, \ldots, A_n$ je dôkaz formuly $A$ v teórii
$T$. Indukciou podľa dĺžky dôkazu ukážeme, že ľubovoľná uzavretá formula v
jazyku $L(C)$ inštancia $A_j'$ formuly $A_j$ je tautologickým dôsledkom konečne
veľa formúl z $\delta(T)$.

\par Môžu nastať tieto prípady:
\begin{itemize}
	\item $A_j$ je axioma výrokovej logiky. Potom $A_j'$ je opäť tautológia.
	$A$ je tautologickým dôsledkom prázdnej množiny predpokladov.
	\item $A_j$ je axioma tvaru $(\forall x) B \implies B_x[t]$. Axioma
	špecifikácie. $A_j: (\forall x) B' \implies B_x'[t]]$ -- leží v
	$\delta T$. $t'$ je term bez premenných a je v $L(C)$. 
	\item $A_j$ je axioma $(\forall x) (C \implies D) \implies (C \implies
	(\forall x) D)$, $x$ nie je voľná v $C$.
	\par Uvažujme formulu $(\forall x) (C \implies D) \implies (C \implies
	(\forall x) D_x[c_{\neg D}])$. Táto formula patrí to $\delta(T)$, lebo
	je to inštancia axiomy špecifikácie.
	\par $ D_x[c_{\neg D}] \implies (\forall x) D$ -- opäť patrí do
	$\delta(T)$ (opäť (*))
	\par Tvrdíme, že formula $A_j$ je tautologický dôsledok horeuvedených 
	formúl. Budeme uvažovať takúto formulu:
	t -- $(A_1 \implies (B_1 \implies D_1)) \implies ((D_1 \implies C_1)
	\implies (A_1 \implies (B_1 \implies C_1)))$ Tvrdíme, že táto formula
	je teoréma.

	\par Dôkaz formuly: Za predpoklady si zoberiem formuly $A_1, (A_1
	\implies (B_1 \implies D_1))$, $B_1$, $(D_1 \implies C_1)$. Z týchto
	predpokladov dokážem odvodiť $C_1$.

	\par $A_1$ bude formula $(\forall x)(C \implies D)$, $B_1: C$, $C_1:
	(\forall x) D$, $D_1: D_x[c_{\neg D}]$

	\item $A_j$ je axioma z $T$, potom $A_j' \in \delta(T)$.
	\item $A_j$ je axioma identity alebo axioma rovnosti, potom $A_j'$ patrí
	do $\delta(T)$.

	\item $A_j$ dostaneme aplikáciou pravidla modu
	ponens z formúl $A_k$ a $A_l$, pričom $k, l < i$. $A_j'$ dostávame z
	$A_k'$ a $A_l'$ pomocou pravidla modus ponens.
	\item $A_j$ je odvodená z $A_k$ pravidlom zovšeobecnenia, pričom
	predpoklad je $k<j$. Teda $A_j: (\forall x) C$, teda $A_k: C$, x --
	premenná. Inštancia $A_j': (\forall x) C'$. Uvažujme inštanciu $A_k'$
	formuly $A_k$ v takomto tvare: $A_k:  C_k'[c_{\neg C'}]$. Podľa
	indukčného predpokladu je táto formula tautologickým dôsledkom konečne
	veľa formúl z $\delta (T)$. Uvažujme formulu $$C_x'[c_{\neg C'}]
	\implies (\forall x) C' \qquad \mbox{(***)}$$
	$A_j'$ je tautologickým dôsledkom formuly z $\delta(T)$. Dokázali sme
	formulu $A'$ tak, že sme nepoužili pravidlo zovšeobecnenia.
\end{itemize} 

\paragraph{Definícia} Hovoríme, že formula $A$ je \emph{kvázitautológia}, ak je
tautologickým dôsledkom inštancií axiom identity a rovnosti.

\paragraph{Veta (Hilbert-Ackermann)} Otvorená teória $T$ v jazyku $L$ (s
rovnosťou) je sporná práve vtedy, keď existuje (kvázi-)tautológia, ktorá je
disjunkciou negácií inštancií axiom z $T$.

\paragraph{Dôkaz} Najprv ľahšia implikácia: Predpokladajme, že sú splnené
podmienky vety, tak potom $T$ je sporná. Zoberme si nejakú formulu $A$. Berieme
$\neg A_1 \lor \neg A_2 \lor \ldots \lor \neg A_n$, kde $A_i$ sú inštancie axiom
z $T$. Pomocou de Morganovho zákona dostaneme $A_1 \land A_2 \land \ldots \land
A_n$. Ak platí $T \models A_i$, potom $T \models A_1 \land \ldots \land A_m$, a
teda $T$ je sporná, lebo je z nej dokázateľná ľubovoľná formula $B$, pretože
$\models A \implies (\neg A \implies B)$ a $T \models B$.

\par Naopak: Predpokladajme, že otvorená teória $T$ je sporná. $x \neq x$, $T
\models x \neq x$. Z toho vyplýva, že ak si zoberieme ľubovoľnú konštantu $r \in
C$, tak potom dostávame inštanciu formuly: $r \neq r$. To je uzavretá inštancia
teorémy vety z $T$, čiže podľa  Lemy 1 eistuje $A_1, A_2, \ldots A_k$  z $\delta
(T)$ také, že $r \neq r$ je tautologickým dôsledkom $A_1$ až $A_k$, teda z
predpokladov inštancií je dokázateľné $A_1, A_2, \ldots, A_k \models r \neq r$.
Platí $A_1 \implies A_2 \implies \ldots \implies A_k \implies r \neq r$ --
tautológia. $p \implies q \iff \neg p \lor q$. $\neg A_1 \lor \neg A_2 \lor
\ldots .. \lor \neg A_k \lor \neg (r=r)$ je tautológia. $A_i$ sú inštancie z
$\delta (T)$. Posledná formula je tautológia, ktorá je disjunkciou negácií
inštancií z $\delta (T)$.

\paragraph{Definícia} Postupnosť formúl $A_1, A_2, \ldots A_n$ nazveme
\emph{špeciálnou}, ak $\neg A_1\lor \neg A_2 \lor \ldots \lor \neg A_n$ je
tautológia. (Vieme) Ak $T$ je sporná teória, potom existuje špeciálna postupnosť
z $\delta (T)$



(pokračovanie)
\paragraph{Definícia} \emph{Stupeň konštanty} $c_{\neg A}$. $(\forall x) A$
uzavretá formula na jazyku $L(C)$. Hovoríme, že konštanta $c_{\neg A}$ spojená
axiomou $$A_{c_{\neg A}} \implies (\forall x) A$$ s formulou $(\forall x) A$ je
stupňa $n$, ak formula $(\forall x) A$ obsahuje $n$ výskytov kvantifikátorov
$\forall$ alebo $\exists$. 

\par Množina formúl $\delta_n(T)$ vznikne z $\delta(T)$ vynechaním všetkých
formúl stupňa $>n$ pre konštantu $c_{\neg A} \in C$. Treba si uvedomiť, že
stupeň konštanty $c_{\neg A}$ je vždy aspoň $1$. $\delta_0(T)$ -- uzavreté
inštancie, axiomy z množiny $T$ a axiom identity a rovnosti.

\par (Dokázali sme) Ak teória $T$ je sporná, existuje špeciálna postupnosť,
ktorá patrí do $\delta(T)$. Nech $n$ je najmenšie také $n$, že špeciálna
postupnosť z $\delta(T)$ je obsiahnutá v $\delta_n(T)$:

$n=0$. Musíme nájsť špeciálnu postupnosť prislúchajúcu do $T$.
Predpokladáme, že pre $n=0$ máme postupnosť $A_1, A_2, \ldots A_k$ --
špeciálna a patrí do $\delta_O(T)$. $c_A, c_{\neg A}$ nahradíme pomocou
premenných $A_1', A_2', \ldots A_k'$ (opäť špeciálna postupnosť). $A_1',
A_2', \ldots, A_n'$ sú všetky formuly, ktoré patria do $T$. $A_1', A_2',
\ldots A_k'$ budú inštancie axiom identity a rovnosti. $\neg A_1' \lor
\neg A_2' \lor \ldots \lor \neg A_n' \leftarrow A_{n+1} \leftarrow
\ldots \leftarrow A_k'$ -- kvázitautológia (vyplýva z toho, že táto
postupnosť je špeciálna). $A_1', A_2', \ldots A_n' \in T$.

\paragraph{Lema} Ak $n>0$ a existuje špeciálna postupnosť z $\delta_n(T)$, tak
potom existuje špeciálna postupnosť aj z $\delta_{n-1}(T)$.

\paragraph{Dôkaz} (pokračovanie dôkazu) Hilbert-Ackermanovej vety.
$\delta_0(T)$. Vieme vytvoriť postupnosť $B_1, B_2, \ldots, B_q \in T$.

\paragraph{Poznámka} Elementárna aritmetika je otvorená teória s konečným počtom
axiom. Hilbertova arigmetika, Presburgerova (??) aritmetika (aritmetika so
symbolmi $0, S, +$. Peanova aritmetika (1931).

\paragraph{Definícia} 
\begin{enumerate}
\item
Hovoríme, že formula $A$ je existenčná, ak $A$ je v
prenexnom tvare a všetky kvantifikátory v prefixe sú existenčné .
\item Hovoríme, že formula $A$ je univerzálna, ak $A$ je v prenexnom tvare a
všetky kvantifikátory sú univerzálne.

\end{enumerate}

\paragraph{Lema 3} Uzavretá existenčná formula $A$ je dokázateľná v predikátovej
logike (s rovnosťou) práve vtedy, keď istá disjunkcia otvoreného jadra formuly
$A$ je kvázitautológia.

\paragraph{Dôkaz} $A: (\exists x_1)(\exists x_2) \ldots (\exists x_n)B$
--formula v prenexnom tvare, $B$ je otvorené jadro. 

\begin{enumerate}
	\item Formulá $A$ je dokázateľná $\iff$ teória s jedinou špeciálnou
	axiomou $\neg A$ je sporná.
	\item Ak použijeme prenexné operácie, dostávame $\models \neg A \iff
	(\forall x_1)\ldots (\forall x_n) \neg B$. $\neg A \iff (\forall x_1)
	\ldots  (_n) \neg B$.

	\item Formula $A$ je dokázateľná $\iff$ keď teória $T$ s jedinou
	špeciálnou axiomou $\neg B$ je sporná. $\neg B$ je otvorená. Keď
	použijeme Hilbert-Ackermannovu vetu, dostávame $\neg B_1, \neg B_2
	\ldots, \neg B_m$ -- nad $\neg B$. Platí $\neg \neg B_1 \lor \neg \neg
	B_2 \lor \ldots \lor \neg \neg B_m$, čo je to isté ako $B_1 \lor B_2
	\lor \ldots \lor B_m$, čo je to isté, ako Hilbert-Ackermannova veta.
\end{enumerate}


\par Teóriu $T$ rozširujeme do $T_H$ s jazykom $L(C)$ a tú zase do $T_R$ s
$L(C)$. $A_x[C_{\neg A}] \implies (\forall x) A$ -- toto môžeme aj obrátiť:
$$(\forall x) A \implies A_x[c_{\neg A}]$$ -- vďaka axiome špecifikácie.
\par Ak teraz vezmeme formulu $B$ takú, že $A\iff B$, potom platí $B_x[c_{\neg
B}] \implies (\forall x) B$. 
$$
\begin{array}{lll}
T_H &\models& A_x[c_{\neg A}] \iff B_x[c_{\neg B}] \\
T_H &\models& A_x [c_{\neg A}] \iff (\forall x) A \\
T_H &\models& A \iff B \\
T_H &\models& (\forall x) A \iff (\forall x) B \\
T_H &\models& B_x[c_{\neg B}] \iff (\forall x) B \\
\end{array}
$$


$$(\forall x)(A\iff B) \implies c_{\neg A} = c_{\neg B}$$

\paragraph{Lema 4} Pre ľubovoľnú teóriu $T$ je $T_R$ konzervatívne rozšírenie.

\par Majme formulu $A$, ktorá je uzavretá a napísaná v prenexnom tvare.
Indukciou podľa počtu všeobecných kvantifikátorov budeme formulu transformovať
do tzv. Herbrandovho variantu. Ak formula $A$ má tvar:
$$ A: (\exists x_1) \ldots (\exists x_n) (\forall y) B, \qquad n \geq 0$$
$$ A^*: (\exists x_1) \ldots (\exists x_n) B_y[f(x\ldots x_n)]$$, $A^*$ je $A_H$

$A^{**}, L \cup \{ f,g,h, \ldots \}$.

\paragraph{Veta} (Herbrandova) Uzavretá formula v prenenom tvare je dokázateľnáv
predikátovej logike (s rovnosťou) práve vtedy, keď istá disjunkcia inštancií
otvoreného jadra je kvázitautológia.

\paragraph{Dôkaz} $A_H$ -- je existenčná formula. Je dokázateľná práve vtedy,
keď vezmeme do úvahy lemu 3 a platí formulácia našej vety. $L'$ .... ??? . Stačí
ukázať, že:
$$\models_L A \iff \models_{L'} A_H$$.
Implikácia zľava doprava je ľahšia -- vieme ukázať, že $\models_{L'} A \implies
\models_{L'} A^*$. Premennú $y$ sme nahradili funkciu $n$ premenných. Všimnime
si:

$$ \models_{L'} (\forall y) B \implies B_y[f(x_1\ldots x_n)]$$; axioma
špecifikácie. $(\exists x_1)(\exists x_2), \ldots (\exists x_n)$. Potom platí aj
$\models A \implies B$, $\models (\exists x) A \implies (\exists x) B$



\paragraph{Veta} (o zavedení funkčného symbolu) Nech formula $(\exists y) A$ je
dokázateľná v teórii $T$ s jazykom $L$. Nech $x_1, x_2, \ldots, x_n$ sú všetky
voľné premenné, ktoré sa vyskytujú vo formuli $(\exists y) A$. Nech $T'$ vznikne
z $T$ pridaním nového $n$-árneho funkčného symbolu $f$ a pridaním axiomy
$A_y[f(x_1, \ldots, x_n)]$. Potom $T'$ je konzervatívne rozšírenie teórie $T$.

\paragraph{Dôkaz} Nech $B$ je uzavretá formula teórie $T$ (s jazykom $L$).
Predpokladáme, že $B$ je teorémou (vetou teórie) $T'$. $T' \models B$. Máme
ukázať, že aj v $T \models B$. Predpokladajme, že formula $B$ má dôkaz v $T'$ a
že v tom dôkaze vystupujú $a_1, a_2, \ldots, a_n$ -- špeciálne axiomy teórie
$T$, prípadne axioma $(*)$. Na základe tohto predpokladu je v predikátovej
logike dokázateľná nasledovnaá formula.

$$(1) \models (\forall x_1) (\forall x_2) \ldots (\forall _n) a_y [f(x_1 \ldots
x_n)] \implies B_1 \implies B_2 \implies \ldots \implies B_n \implies B$$

$B_1, \ldots, B_n$ sú ...ny funkcií $A_1, A_2, \ldots, A_n$. 

$$ A_y[f(x_1, \ldots x_n)], A_1, \ldots, A_n \models B$$

Označme si $C$ -- prenexný tvar nasledovnej formuly:
$$A \implies B_1 \implies \ldots \implies B_n \implies B$$
Potom:

$$ (2) (\exists x_1) (\exists x_2) \ldots (\exists x_n) C_y[f(x_1, \ldots,
_n)]$$ je prenexný tvar $(1)$

Uvažujme $D: (\exists x_1) \ldots (\exists x_n) (\forall y) C$. Potom z tohto
vyplýva $D$ je formula jazyka $L$ a neobsahuje novo zavedený symbol $f$. Ak
konštruujeme herbrandovský variant tej podformuly ($D_H$) (meníme veľké
kvantifikátory) a na prvom kroku dostávame $D^*: (\exists x_1) \ldots (\exists
x_n) C_y [f(x_1, \ldots x_n)]$ -- prenexný tvar $(1)$. Z Herbrandovej vety
dostávame, že $D^*$ je dokázateľné, z tadiaľ $(D^*)_H$ je dokázateľné a z toho 
$(4) T \models D$

\par Prenexnými operáciami dostávame  $$(5) (\exists x_1) (\exists x_2) \ldots
(\exists x_n) (\forall y) (A \implies B_1 \implies \ldots \implies B_n \implies
B)$$

$$(6) T \models (\forall x_1 ) (\forall x_2) \ldots (\forall x_n) (\exists y)
A \implies B_1 \implies B_2 \implies \ldots \implies B_n \implies B$$

\par Každý z týchto predpokladov je dokázateľný v $T$, dostávame $T \models B$ a
teda $T'$ je konzervatívne rozšírenie $B$.

Mám formulu $A$, ktorá je uzavretá, idem priradiť skolemov tvar (skolemov
variant).
\begin{enumerate}
	\item Ak formula $A$ je univerzálna, potom $A_S$ je formula $A$
	\item Ak $A$ je tvaru $(\forall x_1) \ldots (\forall x_n) (\exists y) B,
	n\geq 0$, $f$ je funkčný symbol, kladieme $A_S: (\forall x_1) \ldots
	(\forall x_n) B_y[f(x_1,\ldots, x_n)]$, $(A')C ...$
\end{enumerate}

(1*) $A' \models A$ a ... $A_S \models A$
$ \models B_y[f(x_1, \ldots, x_n)] \implies (\exists y) B$ -- duálny tvar
axiomy špecifikácie. Teraz môžeme sformulovať Skolemovu vetu:

\paragraph{Veta} (Skolemova) V ľubovoľnej teórii $T$ môžeme zostrojiť otvorenú
teóriu $T'$, ktorá je konzervatívnym rozšírením teórie $T$.
\paragraph{Dôkaz} Mám teóriu $T$ s jazykom $L$. Zostrojím si teóriu $T_1$ s tým
istým jazykom a tá teória $T_1$ sú uzávery prenexných tvarov axiom z $T$. Z vety
o uzávere a vety o prenexnom tvare platí, že $T_1$ je konzervatívne rozšírenie
$T$ a naopak, $T$ je konzervatívne rozšírenie $T_1$. $T \equiv T_1$.

\par Teória $T_2$ vznikne z teórie $T_1$ tak, že ľubovoľnej formuli $A \in T_1$
zostrojíme skolemov variant $A_S$. V $T_2$ je konzervatívne rozšírenie $T_1$
podľa vety o zavedení funkčného symbolu. 

\par Ideme vytvárať teóriu $T_3$ -- vznikne z $T_2$ vynechaním všetkých axiom z
$T_1$. Podľa $(1^*)$ dostávame, že $T_2 \equiv T_3$.

\par Ďalej vytvárame teóriu $T_4$ -- pozostáva z otvorených jadier $T_3$, teda
$T_3 \equiv T_4$. Keď to zhrnieme, dostávame: $T \equiv T_1$, $T_2$ je
konzervatívne rozšírenie $T_1$. $T_2 \equiv T_3 \equiv T_4$, a z toho $T_4$ je
konzervatívne rozšírenie $T$.

\paragraph{Veta} (o zavedení funkcie pomocou definície) Majme teóriu $T$ s
jazykom $L$ a nech $x_1, \ldots, x_n, y$ sú navzájom rôzne premenné, ktoré sa
vyskytujú voľne vo formule $D$. Nech platí:
\begin{enumerate}
	\item $T\models  (\exists y) D$
	\item $T\models D \implies (D_y[y] \implies y = t)$
\end{enumerate}
Nech $L'$ vznikne z $L$ pridaním nového $n$-árneho funkčného symbolu $f$ a $T'$
z $T$ pridaním axiomy $$(3) y=f(x_1, \ldots x_n) \iff D$$ (definícia axiomy). Potom
$T'$ je konzervatívne rozšírenie $T$ a ku každej formule $A$ na jazyku $L'$
existuje formula $A^*$ na jazyku $L$ taká, že platí $$(4) T' \models A \iff A^*$$

\paragraph{Dôkaz} Najprv ukážeme, ako ku formuli $A$ priradiť formulu $A^*$, a
potom ukážeme, že $T'$ je konzervatívne rozšírenie $T$.

\par Zostrojíme $A^*$ z $A$ tak, aby platilo $(4)$. Formulu $A$ máme na jazyku
$L'$, problematický je symbol $f$ -- vyskytuje sa v atomických podformuliach.
Nech funkčný symbol $f$ sa vyskytuje vo formuli $A$ a nech je to ten
najvnútornejší výskyt. Je to nejaký $f(t_1, \ldots t_n)$, pričom $t_1, \ldots,
t_n$ už neobsahujú $f$. 

$$A: B_z[f(t_1, \ldots, t_b)]$$, a naše $z$ sa nevyskytuje vo formuli $A$, a ani
v definujúcej formuli $D$. Položme $A^*$  tvare:
$$(5) (\exists z) D'_{x_1, \ldots, x_n, y}[t_1, \ldots, t_n, z] \land B^*)$$,
pričom $D'$ je variant $D$, v ktorej nie je viazaná žiadna premenná, ktorá sa
vyskytuje vo formuli $A$. Z vety o variantoch a definujúcej axiomy $(3)$
dostávame, že na jazyku $L'$ je dokázané $ (6) \models_{L'} z = f(t_1, \ldots, t_n) \iff D'[t_1,
\ldots t_n, z]$. Z vety o ekvivalencii dostávame, že platí $$(7) T' \models
(\exists z) z = f(t_1, \ldots, t_n) \land B^*) \iff f^*$$. Z indukčného
predpokladu dostávame $$(8) T' \models B \iff B'$$

\par $(1) T' \models (\exists z) (z = f (t_1, \ldots, t_n) \land B) \iff A^*$ z
vedy o .... ($\models (\exists x) (x=t \land A) \iff A_x[t]$)
$$T' \models B_z[t_1, \ldots, t_n] \iff A^*$$, na ľavej strane je formula $A:
B_z[t_1, \ldots t_n]$.

\par Použijeme vetu o zavedení funkčného symbolu. Uvažujme $S$ -- teóriu z
jazyka $L'$, ktorá vznikne z $T$ pridaním axiomy:
$$(10) D_y[f(x_1, \ldots, x_n)]$$.

Ukážeme, že $T'$ a $S$ sú ekvivalentné a platí $T' \equiv S$. Potrebujeme
ukázať, že $(10)$ je teorémou $T'$ a $(3) y=f(x_1, \ldots, x_n) \iff D$ je
teorémou (vetou) $S$. V $T' \models f(x_1, \ldots x_n) = f(x_1, \ldots, _n)
\implies D_y[f(x_1, \ldots _n)]$, formula je inštancia axiomy $(3)$. Ak
použijeme inštanciu na axiomu identity $(3)$ $T' \models D_y[f(_1, \ldots,
x_n)]$. Potrebujeme ukázať, že $3$ je dokázateľná v $S$. Vyjdeme z tvaru $(11)
\models_{L'} y = f(x_1, \ldots x_n) \implies (D \iff D_y[f(x_1, \ldots, x_n)])$.

$$(12) \models_{L'} D_y[f'(x_1, \ldots, x_n)] \implies (y = f(x_1, \ldots _n
\implies D) $$

$$(13) S \models (y = f(x_1, \ldots, x_n) \implies D) \mbox{ z $(10)$}$$

$$(14) \models_{L'} D_y[f(x_1, \ldots, x_n) ] \implies (D \implies y = f(x_1,
\ldots x_n)] [T \models D \implies [D_y[t] \implies y = t) (2)$$


$$S \models D \implies y = f(x_1, \ldots x_n)$$

\chapter{Skúška}

\begin{itemize}
	\item Dokázať $4$ vety
	\item je daná formula, nájsť prenexný tvar, skolemov tvar, metódou
	rezolvent ukázať, či platí alebo neplatí, napíšte teóriu s rovnosťou
	\item 3 alebo 4 definície
\end{itemize}

\end{document}

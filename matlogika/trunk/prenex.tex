\chapter{Dokončenie úvodu do matematickej logiky}

\section{Prenexné tvary formúl}

Ako sme mali vo výrokovej logike isté normálne tvary - konjunktívnu a
disjunktívnu normálnu formu, budeme mať aj v predikátovej logike isté
špeciálne tvary. Zaujímavé sú najmä prexenxná forma a ešte Skolemov
normálny tvar, čo je špeciálny prípad prexenej formy.
V prípade prexenxného tvaru ide o preskupenie kvantifikátorov na
začiatok formuly - tvar vzniká aplikovaním kvantifikátorov na otvorenú
formulu.


\begin{definicia}
    Formula $A$ je v prenexnom tvare, ak $A$ je v nasledujúcom tvare:
     $(Q_1 x_1) (Q_2 x_2) (Q_3 x_3) \dots (Q_n x_n) B$, kde
     $x_1, \dots , x_n$ sú navzájom rôzne premenné, $Q_i$ sú
     kvantifikátory $(\forall, \exists)$ a 
     $B$ je bez kvantifikátorov.
    Formulu $B$ nazveme otvoreným jadrom formuly $A$, 
    formulu $(Q_1 x_1) (Q_2 x_2) (Q_3 x_3) \dots (Q_n x_n)$ nazývame
    prefixom formuly $A$.
\end{definicia}

\begin{priklad}
    Formula elementárnej aritmetiky:
    \begin{equation*}
        (\forall x) (\forall y) (\exists z) (x+y=z)
    \end{equation*}
\end{priklad}

\fixme{Pozn.}
\begin{itemize}
 \item $x_1, \dots, x_n$ sú navzájom rôzne pre vylúčenie viacnásobných
    kvantifikácií.
 \item ak $n=0$, tak $A$ je otvorená a nemá prefix
 \item $B$ je najväčšia otvorená podformula formuly $A$.
\end{itemize}


\begin{veta}
 Nech $A$ je ľubovoľná formula predikátovej logiky. Potom existuje
 formula $A'$ v prenexnom tvare také, že
 $\provable A \leftrightarrow A'$.
\end{veta}

Pri prevádzaní formuly na prenexný tvar budeme využívať nasledujúce
\emph{prenexné} operácie, každá z nich nahrádza podformulu
jej ekvivaletom.
\begin{itemize}
    \item[a)] $B$ nahraď variantom formuly $B$ (premenovanie viazaných
    premenných)
    \item[b)] $\neg(Q x) B$ nahraď $(\overline{Q} x) \neg B$
    \item[c)] ak $x$ nie je voľná v $B$, tak podformulu $B\implies (Qx)C$
            nahraď podformulou $(Qx) (B\implies C)$
    \item[d)] ak $x$ nie je voľná v $C$, tak $((Qx)) B \implies C$
        nahraď $(Qx) (B \implies C)$
    \item[e)] ak $x$ nie je voľná v $B$, $\square \in \{\land,\lor\}$.
     Potom $B \square ((Qx)C)$ resp. $((Qx)B)\square C$ nahraď
     $(Qx)(B \square C)$
\end{itemize}

\begin{lema}
    Prenexnými operáciami dostaneme ekvivalentné formuly
\end{lema}
\begin{dokaz}
  \begin{itemize}
    \item[a)] Veta o variantoch
    \item[b)] Platí
        \begin{eqnarray*}
            \provable \neg(\forall x) B \leftrightarrow
                \neg (\forall x) \highlightb{\neg\neg} B \\
            \provable \highlighta{\neg (\forall x) \neg} \neg B
                \leftrightarrow \highlightb{(\exists x)} \neg B
        \end{eqnarray*}
        a taktiež
        \begin{eqnarray*}
            \provable \neg(\exists x) B \leftrightarrow
                \neg (\exists x) \highlightb{\neg\neg} B \\
            \provable \highlighta{\neg (\exists x) \neg} \neg B
                \leftrightarrow \highlightb{(\forall x)} \neg B                
        \end{eqnarray*}
        z čoho vieme priamo odvodiť dané tvrdenie.
    \item[c)] Nech $Q=\forall$.
        $\provable (\forall x) (B \implies C) \leftrightarrow
            (B \implies (\forall x) C)$. \fixme{moze byt x volna?}
        \begin{itemize}
        \item[$\Rightarrow$]
            5. Axióma predikátovej logiky
        \item[$\Leftarrow$]
            \begin{itemize}
            \item[1] $\provable (\forall x) C \implies C$ --
                axióma špecifikácie
            \item[2] $\provable \highlighta{
                 \underbrace{(B \implies (\forall x) C)}_X
                \implies 
                 (\underbrace{((\forall x) C \implies C)}_Y
                    \implies \underbrace{(B \implies C)}_Z)}$.
            \item[*] $\provable X \implies (Y \implies Z)$.
            \item[*] $\provable (X \implies (Y \implies Z) \implies
                (Y \implies (X \implies Z))$ -- pravidlo zámeny
                predpokladov
            \item[3] $\provable \highlighta{
                ((B \implies (\forall x) C)
                \implies 
                 (((\forall x) C \implies C)
                    \implies (B \implies C)))
                }
                \implies \highlightb{
                   (((\forall x) C \implies C) \implies
                    ((B \implies (\forall x) C) \implies (B \implies
                    C)))}$.
            \item[4] $\provable
                  \highlightb{
                   (((\forall x) C \implies C) \implies
                    \highlighto{
                    ((B \implies (\forall x) C) \implies (B \implies
                    C)))}}$ - MP 2,3
            \item[5] $\provable \highlighto{
                (B \implies (\forall x)) \implies (B
                    \implies C)}$ - MP 1,4
            \item[6] $\provable (B \implies (\forall x) C) \implies
            \highlighta{(\forall x)} (B \implies C)$ -- 
                pravidlo zavedenia veľkého kvantifikátora
            \end{itemize}
        \end{itemize}
     Druhou možnosťou je $Q=\exists$.
     $\provable (\exists x) (B \implies C) \leftrightarrow 
        (B \implies (\exists x) C)$, kde $x$ nie je voľná v $B$.
        \begin{itemize}
        \item[$\Rightarrow$]
            \begin{itemize}
            \item[1] $\provable C \implies (\exists x) C$ --
                duálna verzia axiómy špecifikácie
            \item[2] $\provable ((B \implies C) \implies
                 ((C \implies (\exists c) C) \implies (B \implies
                 (\exists x) C ))$ -- jednoduchý sylogizmus (JS) \fixme{ujeta zatvorka}
            \item[3] $\provable
                \highlighta{
                (((B \implies C) \implies (( C \implies (\exists x) C)
                \implies (B \implies (\exists x) C)))}
                \implies
                \highlightb{
                  ((C \implies (\exists x) C) \implies (( B \implies
                  C) \implies (B \implies (\exists x) C)))}$ -- 
                  pravidlo zámeny predpokladov
            \item[4] $\provable \highlightb{
                  ((C \implies (\exists x) C) \implies 
                  \highlighto{(( B \implies
                  C) \implies (B \implies (\exists x) C)))}}$ -- MP 2,3
            \item[5] $\provable
                  \highlighto{(( B \implies
                  C) \implies (B \implies (\exists x) C)))}$ -- MP 1,4
            \item[6] $\provable \highlighta{(\exists x)}
                ( B \implies C) \implies (B \implies (\exists x) C))$
                -- pravidlo zavedenie existenčného kvantifikátora
            \end{itemize}
        \item[$\Leftarrow$]
            \begin{itemize}
                \item[1] $\provable C \implies (B \implies C)$ -- A1

                \item[2] $\provable (\exists x) C \implies (B \implies
                C)$ -- pravidlo distribúcie existenčného
                kvantifikátora

                \item[3] $\provable \neg B \implies (B \implies C)$ -- postova
                teoréma

                \item[4] $\provable (B \implies C) \implies 
                    (\exists x)(B \implies C)$ -- 
                    duálny tvar axiómy špecifikácie

                \item[5] $\provable \highlighta{\neg B \implies 
                    (\exists x) (B \implies C)}$ -- JS 2,3

                \item[*] $\provable
                    \highlighta{
                    (\neg \underbrace{B}_X \implies 
                        \underbrace{(\exists x) ( B \implies C)}_Z)
                    }
                    \implies
                    \highlightb{
                    ((\underbrace{(\exists x) C}_Y 
                        \implies 
                      \underbrace{(\exists x) (B \implies C)}_Z)
                    \implies
                    (\underbrace{B}_X \implies 
                        \underbrace{(\exists x) C)}_Y
                      \implies 
                        \underbrace{(\exists x) (B
                    \implies C)}_Z))}$ -- dokážeme neskôr

                \item[6] $\provable
                    \highlightb{
                    ((( \exists x) C \implies (\exists x) (B \implies C))
                    \implies
                    \highlighto{
                    (B \implies (\exists x) C) \implies (\exists x) (B
                    \implies C )))}}$ -- MP 5,*

                \item[7] $\provable
                    \highlighto{
                    (B \implies (\exists x) C) \implies (\exists x) (B
                    \implies C )))}$ -- MP 2,6
            \end{itemize}
            Ešte treba dokázať formulu *
            \begin{itemize}
            \item[a] $\neg X \implies Z, X \implies Y, Y \implies Z, 
                \highlighta{X}
                \provable Z$
            \item[b] $\neg X \implies Z, X \implies Y, Y \implies Z,
                \highlightb{\neg X}
                \provable Z$
            \item[c] $\neg X \implies Z, X \implies Y, Y \implies Z
                \provable Z$ -- veta o neutrálnej formule ($X,\neg
                X$).
            \item[d] $\provable (\neg X \implies Z) \implies (
                    (X \implies Y) \implies ((Y \implies Z) \implies
                    X))$ -- veta o dedukcii
            \end{itemize}
            \fixme{mame inak preusporiadane ciastkove veci vzhladom na
            *}
            \fixme{ponahanat zatvorky vsade}
        \end{itemize}
    \item[d)]
        \begin{itemize}
        \item[$Q=\forall$]
            $\provable (\exists x) (B \implies C) \leftrightarrow
             ((\forall x) B \implies C)$ ak $x$ nie je voľná v $B$.
            \begin{itemize}
            \item[1]
                $\provable ((\forall x) B \implies C) \leftrightarrow
                    (\neg C \implies \neg (\forall x) B)$
            \item[2]
                $\provable ((\forall x) B \implies C) \leftrightarrow
                    (\neg C \implies \neg (\forall x) \highlighta{\neg
                    \neg} B)$
            \item[3]
                $\provable ((\forall x) B \implies C) \leftrightarrow
                    (\neg C \implies \highlightb{(\exists x)} \neg B)$
            \item[4]
                $\provable (\exists x) (\neg C \implies \neg B)
                \leftrightarrow (\neg C \implies (\exists x) \neg B)$
                 (platí c)
            \item[5]
                $\provable (\neg C \implies \neg B) \implies (B \implies
                C)$
            \item[6]
                $\provable (\exists x) (B \implies C) \leftrightarrow
                    (\neg (\exists x) \neg B \implies \neg \neg C)$
            \item[7]
                $\provable (\exists x) (B \implies C) \leftrightarrow
                    ((\forall x) B \implies C)$
            \end{itemize}

        \item[$Q=\exists$]
            $\provable (\exists x) (B \implies C) \leftrightarrow
             ((\forall x) B \implies C)$ ak $x$ nie je voľná v $B$.
            \begin{itemize}
            \item[1]
                $\provable ((\exists x) B \implies C) \leftrightarrow
                    (\neg C \implies \neg (\exists x) B)$
            \item[2]
                $\provable ((\exists x) B \implies C) \leftrightarrow
                    (\neg C \implies \neg (\exists x) \neg \neg B)$
            \item[3]
                $\provable ((\exists x) B \implies C) \leftrightarrow
                (\neg C \implies (\forall x) \neg B)$
            \item[4]
                $\provable (\forall x) (\neg C \implies \neg B)
                \leftrightarrow
                    (\neg C \implies (\forall x) \neg B)$ - (plati c)
            \item[5]
                $\provable (\forall x) (B \implies C) \leftrightarrow
                    (\neg (\forall x) \neg B \implies \neg \neg C)$
            \item[6]
                $\provable (\forall x) (B \implies C) \leftrightarrow
                    ((\exists x) B \implies C)$
            \end{itemize}
        \end{itemize}
        \item[e)]
            $\provable (Qx) (B\square C) \leftrightarrow (B\square (Qx)C)$,
            kde $x$ nie je voľná v $B$.
            Na základe operácii c),d) vieme toto dokázať, pretože platí
            \begin{align*}
                \provable (A \lor B) \leftrightarrow (\neg A \implies B) \\
                \provable (A \land B) \leftrightarrow (A \implies \neg B)
            \end{align*}
  \end{itemize}
\end{dokaz}

\begin{dokaz}[Dôkaz vety \todo{ref}]
Budeme postupovať matematickou indukciou vzhľadom na zložitosť formuly $A$.
\begin{itemize}
    \item $A$ je atomická formula. $A$ je potom v prenexnom tvare.
    \item $A=\not B$. Na $B$ sa vzťahuje IP, teda vieme zostrojiť
        $B'$ takú, že platí
        $\provable B \leftrightarrow B'$.
        Položíme $A'=\neg B'$ a aplikovaním prenexnej operácie b) dostaneme 
        $A''$ v správnom tvare.
    \item $A=B \implies C$. Na $B,C$ platí IP a teda existujú formuly
        $B',C'$ v prenexnom tvare, pre ktoré platí
        $\provable B \leftrightarrow B'$, $\provable C \leftrightarrow C'$.
    \todo{dokoncit}
\end{itemize}
\end{dokaz}
\todo{dopisat}

\section{Skolemov tvar}
\todo{}

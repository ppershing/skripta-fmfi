\section{Rozšírenia teórie}

V nasledujúcej časti budeme definovať rozšírenia,
ktoré v istom zmysle ani nepomôžu ani
neuberú sile teórii.

\begin{definicia}[Rozšítenie jazyka]
%%% {{{
    Jazyk $L'$ je \emph{rozšírením jazyka} $L$, ak každý
    špeciálny symbol jazyka $L$ (prípadne aj symbol $=$)
    je v jazyku $L'$ obsiahnutý s rovnakým významom a s rovnakou árnosťou.
%%% }}}
\end{definicia}

\begin{priklad}
    Nech jazyk $L'$ je jazyk s rovnosťou a špeciálnymi symbolmi
    ``$<$'' a ``$0$''.
    Jazyk $L$ má symboly ``$<$'' a ``$=$''.
    Jazyk $L'$ je potom rozšírením jazyka $L$.
\end{priklad}    

\begin{definicia}[Rozšítenie teórie]
%%% {{{
    Majme teóriu $T'$ s jazykom $L'$. Hovoríme, že $T'$ je
    rozšírením teórie $T$ s jazykom $L$, ak platí,
    že $L'$ je rozšírením jazyka $L$ a pre každý formulu $A$ jazyku $L$
    platí $T \provable A \then T' \provable A$. 
%%% }}}    
\end{definicia}

\begin{priklad}
    Uvažujme teóriu grúp -- je to teória s rovnosťou, ktorá
    používa špeciálny symbol ``$+$'' a existuje v nej neutrálny prvok.
    
    Axiomy:
    \begin{itemize}
    \item $\forall x,y,z: (x+y)+z = x+(y+z)$
    \item $(x+0) = x = (0+x)$
    \item $(x+(-x)) = 0 = ((-x)+x)$
    \end{itemize}

    Ak si vezmeme relačnú štruktúru $m=\langle \mathbb{N}^+,0,+ \rangle$,
    táto realizuje jazyk teórie grúp.
    Nie je však modelom (nie všetky axiomy nie sú splnené, menovite
    napríklad inverzné prvky).
    Pokiaľ ale vezmeme $m=\langle \mathbb{Z},0,+ \rangle$,
    táto množina tvorí model teórie grúp.  

    Teraz si zoberme jazyk $L = \{0,1,+,*\}$
    a uvažujme postupne nasledujúce teórie:
    \begin{enumerate}
    \item teória grúp
    \item teória okruhov
    \item teória oborov integrity
    \item teória telies
    \item teória polí
    \item teória zväzov
    \end{enumerate}
    Každá z týchto teórii je rozšírením tej predchádzajúcej.
\end{priklad}

\begin{poznamka}
    Je dôležité si uvedomiť, že nie všetky axiómy pôvodnej teórie $T$
    sa musia nachádzať aj v rozšírenej teórii $T'$ -- 
    stačí, ak sa dajú odvodiť v $T'$.
\end{poznamka}

\begin{poznamka}
 Ak teória $T'$ nad jazykom $L'$ je rozšírením teórie $T$ nad jazykom
 $L$ a vieme že $T'$ je bezosporná, potom aj $T$ je bezosporná.
\end{poznamka}
\begin{dokaz}
    Predpokladajme, že $T$ je sporná teória. Teda je v nej dokázateľná
    každá formula.
    Špeciálne, je dokázateľné $T \provable A$ a $T \provable \neg A$.
    Keďže $T'$ je rozšírenie, musí potom platiť
    $T' \provable A$ a $T' \provable \neg A$. To je ale spor.
\end{dokaz}

\begin{definicia}[konzervatívne rozšírenie]
    Hovoríme, že teória $T'$ nad jazykom $L'$ je konzervatívnym
    rozšírením teórie $T$ nad jazykom $L$, ak pre každú formulu
    $A$ nad jazykom $L$ platí $T' \provable A \then T \provable A$.
    Inak povedané, konzervatívnym rozšírením nezískame žiadne nové 
    teorémy.
\end{definicia}

\begin{poznamka}
    Spojením posledných dvoch definícii dostávame, že pre
    konzervatívne rozšírenie $T',L'$ teórie $T,L$ platí
    \begin{equation*}
        \forall A \in L: T \provable A \iff T' \provable A
    \end{equation*}
\end{poznamka}

\begin{poznamka}
    Nech $T',L'$ je konzervatívne rozšírenie $T,L$. Potom platí (z
    predchádzajúcej poznámky)
    $T$ je bezosporná $\iff$ $T'$ je bezosporná.
\end{poznamka}

\begin{veta}[Henkinova] 
    K ľubovoľnej teórii $T$ môžeme zostrojiť Henkinovu
    teóriu $T_H$, ktorá je konzervatívnym rozšírením teórie $T$.
\end{veta}    

\begin{dokaz}
%%% {{{
    Teóriu $T$ rozšírime a priradíme k nej teóriu $T_H$ tak, že
    jednak rozšírime jazyk teórie a jednak pridáme axiómy.
    Nech teória $T$ má jazyk $L$.
    Budeme tvoriť rozšírený jazyk $L_H$ tak, že budeme pridávať konštanty:

    Pre každú formulu $A$ napísanú v jazyku $L$,
    ktorá má jedinú premennú $x$ vytvoríme konštanty $c_A, c_{\neg A}$
    a nasledovné axiomy: 
    \begin{itemize}
        \item[H1:]  $(\exists x) A \implies A_x[c_A]$
        \item[H2:]  $A_x{c_{\neg A}} \implies (\forall x) A$
    \end{itemize}

    Stačil by nám aj jeden typ axiómy, ako sa môžeme ľahko presvedčiť:
    \begin{itemize}
        \item $(\exists x) \neg A \implies \neg A_x[c_{\neg A}]$ -- H1
        \item $\neg \neg A_x[c_{\neg A}] \implies
                (\forall x) \neg \neg A$ -- obmena implikácie
        \item $A_x[c_{\neg A}] \implies (\forall x) A$ -- odstránenie
            dvojitej negácie
    \end{itemize}

    Konštanty $c_a, c_{\neg A}$ nazývame Henkinove konštanty prvého
    rádu. Tieto konštanty nám vytvoria množinu konštánt, označme ju
    $C_1$. Týmito konštantami rozšírime jazyk $L$.
    
    Teraz zoberme formulu $B$ na jazyku $L(C_1)$, ktorá obsahuje práve
    jednu voľnú premennú a aspoň jednu konštantu z $C_1$. K tejto
    formule priradíme podobne ako minule konštanty $c_B, c_{\neg B}$.
    Takto dosiahnuté konštanty budeme nazívať Henkinovské konštanty
    druhého rádu a ich množinu označíme ako $C_2$.
    
    Induktívne pokračujeme ďalej a podobne vytvárame množinu $C_3,
    C_4, \dots$.
    Množinu $C_{n+1}$ vo všeobecnosti vytvoríme z množiny $C_n$, tak,
    že zoberieme formuly nad jazykom $L(C_n)$, ktoré obsahujú jednu
    voľnú premennú a aspoň jednu konštantu $n$-tého rádu.

    Označme si teraz
    \begin{equation*}
        L(C) = L \union \bigcup_{i=1}^{\infty} C_i
    \end{equation*}
    Teóriu $T_H$ bude tvoriť rozšírenie $L(C)$ jazyka $L$,
    axiómy budú axiómy $T$ ku ktorým pridáme všetky axiómy $H1$.
    Je ihneď zrejmé, že $T_H$ je rozšírenie teórie $T$.
    Potrebujeme ukázať, že $T_H$ je konzervatívne rozšírenie teórie $T$, t.j.
    že pre každú formulu $A$ jazyka $L$ platí 
    $T_H \provable A \Rightarrow T \provable A$
    \startFIXME
    Nech platí, že v $T_H$ je dokázateľná formula $A$
    a nech $B_1, B_2, \ldots ,B_n$ sú všetky Henkinovské
    axiómy vyskytujúce sa v dôkaze $A$. Keďže dôkaz je konečný, týchto
    axióm je konečný počet. Ďalej môžeme uvažovať (ako sme už ukázali),
    že všetky axiómy $B_1, \ldots, B_n$ sú typu $H1$.
    Máme teda
    \begin{equation*}
        T, B_1, \dots ,B_n \provable A
    \end{equation*}
    Keďže axiómy $B_1,\ldots,B_n$ sú uzavreté formuly, môžeme použiť vetu o dedukcii
    a dostávame
    \begin{equation*}
        T \provable B_1 \implies B_2 \implies \ldots \implies B_n \implies A
    \end{equation*}
    Axiómy navyše môžeme poprehadzovať tak, aby $B_1$ obsahovala konštantu maximálneho rádu.
    Teda $B_1$ je tvaru $(\exists x) D \implies D_x[c_D]$, pričom $c_D$ nie je je použitá
    v $B_2, \ldots, B_n$. Použijeme vetu o konštantách a dostávame
    \begin{equation*}
        T \provable ((\exists x) D \implies D_x[w] ) \implies (B_2 \implies \ldots \implies B_n \implies A)
    \end{equation*}
    kde $w$ je nová premenná.
    Teraz môžeme použiť pravidlo zavedenia existenčného kvantifikátora --
    ak $T \provable A \implies B$ a $w$ nie je voľná v $B$, potom $T\provable (\exists w) A \implies B$.
    Čiže
    \begin{equation*}
        T \provable (\exists w) ((\exists x)D \implies D_x[w]) \implies (B_2 \implies
            \ldots \implies B_n \implies A)
    \end{equation*}
    Ďalej použijeme prenexnú operáciu $(Qx) (A\implies B) \iff (A\implies
    (Qx)B)$ (za predpokladu, že $x$ nie je voľná v $A$), aby sme $w$
    preniesli dovnútra. Výsledkom je
    \begin{equation*}
        T \provable ((\exists x) D \implies (\exists w)D_x[w]) \implies B_2 \implies \ldots \implies B_n \implies A
    \end{equation*}
    Z vety o variantoch ale máme
    \begin{equation*}
        T \provable ( \exists x ) D \implies (\exists w) D_x[w] \\
    \end{equation*}
    z čoho pomocou pravidla modus ponens získame
    \begin{equation*}
        T \provable B_2 \implies B_3 \implies \ldots \implies B_n \implies A
    \end{equation*}
    Opakovaním postupu ďalších $n-1$ krát dostaneme $T \provable A$.
    Ukázali sme teda, že $T_H$ s jazykom $L(C)$ je konzervatívne rozšírenie jazyka $L$.
%%% }}}
\end{dokaz}

\stopFIXME

\begin{veta}[Lindenbaum]
    Ak $T$ je bezosporná teória s jazykom $L$, potom existuje úplné
    rozšírenie $T'$ teórie $T$ s rovnakým jazykom $L$.
\end{veta}

\begin{dokaz}[Lindenbaumovej vety]
%%% {{{
    \fixme{vyfaktorovat tento dokaz na viacero nezavislych tvrdeni}
    Nech $\mathscr{S}$ je množina všetkých uzavretých formúl jazyka $L$.
    Ďalej definujeme
    $\mathcal{B} = \{ S \mid S \subseteq \mathscr{S}, T \union S
        \mbox{ je bezosporná}\}$.
    Množina $\mathcal{B}$ je čiastočne usporiadaná na $\subseteq$ a
    má konečnú vlastnosť -- keď zoberiem ľubovoľnú podmnožinu
    $S \subseteq \mathscr{S}$, bude platiť
    \begin{equation*}
        S \in \mathcal{B} \iff \forall \mbox{ konečné } S' \in
        \mathcal{B}: S' \subseteq S
    \end{equation*}
    %
     Potrebujeme ukázať, že operácia inklúzie $\Psi, \Psi \subseteq
     \mathcal{B}\times\mathcal{B}$ je čiastočné usporiadanie, čiže je
    %
    \begin{itemize}
        \item reflexívna
            \begin{equation*}
                \forall S \in \mathcal{B}: (S,S) \in \Psi
            \end{equation*}
        \item antisymetrická
            \begin{align*}
                &(S_1,S_2) \in \Psi \land (S_2,S_1) \in \Psi
                    \then S_1 = S_2, \quad \mbox{t.j.} \\
                &S_1 \subseteq S_2 \land S_2 \subseteq S_1 \then S_1 = S_2
            \end{align*}
        \item tranzitívna. (dokážeme analogicky)
    \end{itemize}
    %
    $\mathcal{B}$ je teda čiastočne usporiadaná inklúziou $\Psi$.
    Navyše
    \begin{equation*}
        \emptyset \in \mathcal{B}, \mbox{ lebo } T \union \emptyset = T
    \end{equation*}
    Ak by totiž $\emptyset$ nebola v $\mathcal{B}$, potom by $T$ bola sporná.

    Teraz ukážeme, že množina $\mathcal{B}$ má konečnú vlastnosť:
    \begin{equation*}
        S \in \mathscr{S}, S \in \mathcal{B} \iff \forall \textrm{
        konečnú }S' \subseteq S \textrm{ platí } T \union S' 
            \textrm{ je bezosporná, teda }S' \in \mathcal{B}
    \end{equation*}
   
   \begin{itemize}
       \item[$\Rightarrow:$]
            Nech $S \in \mathcal{B}$. Potom $T \union S$ je bezosporná.
            Ak teda $S' \subseteq S$ a  $S'$ je konečná, teória 
            $T \union S'$ bude tiež bezosporná $\then S' \in \mathcal{B}$
        \item[$\Leftarrow:$]
            Predpokladajme, že pre každú konečnu podmnožinu $S' \subseteq S$
            je $T \union S'$ je bezosporná.
            Chceme ukázať $S' \in \mathcal{B} \then S \in \mathcal{B}$.

            Tvrdenie dokážeme sporom.
            Predpokladajme, že $S \not \in B$.
            Potom $T \union S$ je sporná,
            čiže pre ľubovoľnú dokázateľnú formulu A je dokázateľné
            $\neg(A \implies A)$.

            Nech $A_1, A_2, \dots, A_n$ je dôkaz 
                $\provable \neg(A \implies A)$.
            Nech $B_1, B_2, \dots, B_m$ sú tie formuly,
            ktoré sa v tom dôkaze vyskytujú a patria do množiny $S$.
            Tvrdíme, že ich počet $m \ge 1$.
            Prečo? Inak by bola priamo $T$ sporná.
            Zoberme teraz ale konečnú množinu $S'=\{B_1, \dots, B_m\}$.
            Zjavne $T \union S'$ je sporná teória.
            To je ale spor s predpokladmi.
    \end{itemize}

    \begin{lema}[Princíp maximality]
        Každá neprázdna neprázdna podmnožina $\mathcal{P}(\mathscr{S})$ s konečnou vlastnosťou 
        má maximálny prvok vzhľadom na inklúziu.
    \end{lema}

    Nech $S_0$ je maximálny prvok množiny $\mathcal{B}$ vzhľadom na inklúziu.
    Položme rozšírenie $T' = T \union S_0$. Ukážeme, že $T'$ je úplná
    teória, t.j. že pre ľubovoľnú uzavretú formulu $A$ je dokázateľná
    v teórii $T'$ buď $A$ alebo $\neg A$.

    Uvažujme sporom - nech $T'$ nie je úplná teória. 
    Potom existuje uzavretá formula $A$ taká,
    že $T'\not \provable A$ a $T' \not \provable \neg A$.
    Lenže z tohoto je evidentné (keďže $T'$ je bezosporná), že aj
    $T'' = T' \union \{\neg A\}$ je bezosporná teória.\footnote{
        \fixme{kde sme to dokazali}
        Odvoláme sa na predtým dokázaný dôsledok: ak $A$ je uzavretá,
        potom $T \provable A \iff T \union \{\neg A'\}$ je sporná teória.
    }
    To je ale v spore s tým, že $S_0$ je maximálny prvok $\mathcal{B}$.

    Dosiahli sme zúplnenie teórie. Pre teóriu $T$ sme získali $T'$,
    ktorá je bezosporná a je úplným rozšírením $T$ na rovnakom jazyku.
%%% }}}    
\end{dokaz}

\startFIXME

Keď máme $T$, $L$, vieme to rozšíriť na $T_H$ s jazykom $L(C)$. Keď máme $T$ bezospornú, $T(H)$ s jazykom $L(C)$ je tiež bezosporná. Dokážem vytvoriť Hankinovskú úplnú $T_H'$, $L(C)$ a pre ňu model $m$.

$T, L$ - bezosp.

$T', L'$ - úplná hakinovská

$T', L' - m'$

$T'$ je bezosp. rozšírenie $T$, potom $T \provable A \iff T' \vdash A$ Potom platí, že keď zooberiem ľub. $A \in T$, potom  $m' \vdash A$. Pre ľubov. rozšírenie $T$, $T'$ $A\in T, T' \vdash A \implies m' \models A, m, v T$.

\paragraph{Definícia.}

$T,L$, $T',L'$, $L'$ je rozš. $L$. Nech $m'$ je realizácia jaz. $L'$, redukovaním štruktúry $m'$ na jaz. $L$ získame realiz. $T$ v jaz. $L$.

$m$: univerzum $m$ bude to isté univerzum ako univerzum $m'$.

$m$ obsahuje iba také relácie a zobrazenia, ktoré realizujú špecálne symboly jazyka $L$ v realizácii $m'$. Tzn. ak $f$ je ľub. n-ány funkčný symbol $L$, $f_m'$ je zobrazenie, ktoré realizuje $f$ v $m'$, potom zostáva realizáciou $f$ v $m$.

Podobne s predikátom $P$.

$m$ vzniklo redukciou $m'$ na jazyk $L$. $(m: m' \triangle L)$
\footnote{na prednáške bolo miesto $\triangle$ použíté niečo ako $\land$, ale jedna nožička bola dlhšia ako druhá}.
$m'$ je expanzia realizácie $m$

\paragraph{Poznámka.}
$m$ je redukcia $m'$ na jazyk $L$ ($m'\triangle L$), $A$,$L$. Chceme ukázať $m \models A \iff m' \models A$. Všimnime si, že univerzum, t.j. aj ohodnotenia a symboly, sú tie isté. Preto, ak $m' \models A$, potom aj $m \models A$ a obrátene. Teraz dokážeme, že každá bezosporná teória má model.

\paragraph{Veta.}
Nech $T'$ je rozšírenie teórie $T, L$. Ak $m$ je model $T'$ a $m:m'\triangle L$, tak $m$ je model $T$.

\paragraph{Dôkaz} To, čo sme tu už porozprávali. $m'$ je model $T$',
$A \in T$, $A$ je axioma $T$, $m' \models A \iff M \models A$.

Nasledujú dve vety o kompaktnosti a ich dôsledky. Dávajú nám konečnú charakterizáciu splniteľnosti.

\stopFIXME
